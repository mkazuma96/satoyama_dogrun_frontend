(()=>{var e={};e.id=602,e.ids=[602],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},1825:()=>{},6411:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>i.a,__next_app__:()=>h,originalPathname:()=>l,pages:()=>p,routeModule:()=>u,tree:()=>d}),a(1123),a(596),a(1506),a(5866);var r=a(3191),s=a(8716),n=a(7922),i=a.n(n),o=a(5231),c={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>o[e]);a.d(t,c);let d=["",{children:["admin",{children:["applications",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,1123)),"/Users/hirotakoyanaka/Desktop/里山ドッグラン2/satoyama_dogrun_frontend-main/app/admin/applications/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,596)),"/Users/hirotakoyanaka/Desktop/里山ドッグラン2/satoyama_dogrun_frontend-main/app/admin/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,1506)),"/Users/hirotakoyanaka/Desktop/里山ドッグラン2/satoyama_dogrun_frontend-main/app/layout.tsx"],loading:[()=>Promise.resolve().then(a.bind(a,9644)),"/Users/hirotakoyanaka/Desktop/里山ドッグラン2/satoyama_dogrun_frontend-main/app/loading.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,5866,23)),"next/dist/client/components/not-found-error"]}],p=["/Users/hirotakoyanaka/Desktop/里山ドッグラン2/satoyama_dogrun_frontend-main/app/admin/applications/page.tsx"],l="/admin/applications/page",h={require:a,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/admin/applications/page",pathname:"/admin/applications",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},7766:(e,t,a)=>{Promise.resolve().then(a.bind(a,7320))},7320:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>x});var r=a(326),s=a(7577),n=a(3071),i=a(772),o=a(567),c=a(9635),d=a(5932),p=a(2887),l=a(6511),h=a(361),u=a(9669),m=a(8998),g=a(6824),y=a(5999);function x(){let[e,t]=(0,s.useState)(!0),[a,x]=(0,s.useState)(null),[w,v]=(0,s.useState)("pending"),[f,j]=(0,s.useState)([]),_=async()=>{t(!0);try{console.log("Fetching applications...");let e=await g.x1.getAdminApplications();console.log("Applications response:",e),j(Array.isArray(e)?e:e.applications||[]),x(null)}catch(e){console.error("Applications fetch error:",e),x(e.response?.data?.detail||"申請データの取得に失敗しました"),y.Am.error("申請データの取得に失敗しました")}finally{t(!1)}},b=async e=>{try{await g.x1.approveApplication(e,"承認"),y.Am.success("申請を承認しました"),_()}catch(e){console.error("Approval error:",e),y.Am.error("承認に失敗しました")}},N=async e=>{try{await g.x1.rejectApplication(e,"却下"),y.Am.success("申請を却下しました"),_()}catch(e){console.error("Rejection error:",e),y.Am.error("却下に失敗しました")}},k=f.filter(e=>"pending"===w?"pending"===e.status:"approved"===w?"approved"===e.status:"rejected"!==w||"rejected"===e.status);return e?r.jsx("div",{className:"p-6",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600 mx-auto"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"申請データを読み込み中..."})]})}):a?r.jsx("div",{className:"p-6",children:(0,r.jsxs)("div",{className:"text-center text-red-600",children:[(0,r.jsxs)("p",{children:["エラー: ",a]}),r.jsx(i.z,{onClick:_,className:"mt-4",children:"再試行"})]})}):(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"mb-6",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"申請管理"}),(0,r.jsxs)("div",{className:"flex space-x-1 bg-gray-100 p-1 rounded-lg w-fit",children:[(0,r.jsxs)(i.z,{variant:"pending"===w?"default":"ghost",size:"sm",onClick:()=>v("pending"),className:"relative",children:[r.jsx(m.Z,{className:"h-4 w-4 mr-2"}),"審査中",f.filter(e=>"pending"===e.status).length>0&&r.jsx(o.C,{variant:"secondary",className:"ml-2",children:f.filter(e=>"pending"===e.status).length})]}),(0,r.jsxs)(i.z,{variant:"approved"===w?"default":"ghost",size:"sm",onClick:()=>v("approved"),children:[r.jsx(h.Z,{className:"h-4 w-4 mr-2"}),"承認済み"]}),(0,r.jsxs)(i.z,{variant:"rejected"===w?"default":"ghost",size:"sm",onClick:()=>v("rejected"),children:[r.jsx(u.Z,{className:"h-4 w-4 mr-2"}),"却下"]})]})]}),r.jsx("div",{className:"space-y-4",children:0===k.length?r.jsx(n.Zb,{children:r.jsx(n.aY,{className:"pt-6",children:r.jsx("div",{className:"text-center text-gray-500 py-8",children:r.jsx("p",{children:"pending"===w?"審査中の申請はありません":"approved"===w?"承認済みの申請はありません":"却下された申請はありません"})})})}):k.map(e=>r.jsx(n.Zb,{className:"mb-4",children:(0,r.jsxs)(n.aY,{className:"pt-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[r.jsx(c.Z,{className:"h-5 w-5 text-blue-600"}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"font-semibold text-lg",children:e.user_name}),(0,r.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[r.jsx(d.Z,{className:"h-4 w-4"}),r.jsx("span",{children:e.user_email})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[r.jsx(p.Z,{className:"h-4 w-4"}),r.jsx("span",{children:e.user_phone})]})]})]})]}),(0,r.jsxs)("div",{className:"text-right",children:[r.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"申請日"}),r.jsx("div",{className:"font-medium",children:new Date(e.created_at).toLocaleDateString("ja-JP")})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 mb-4",children:[(0,r.jsxs)("div",{children:[r.jsx("h4",{className:"font-medium text-sm text-gray-700 mb-2",children:"犬の情報"}),(0,r.jsxs)("div",{className:"bg-gray-50 p-3 rounded space-y-2 text-sm text-gray-600",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx(l.Z,{className:"h-4 w-4 text-gray-500"}),(0,r.jsxs)("span",{children:["名前: ",e.dog_name]})]}),(0,r.jsxs)("div",{children:["犬種: ",e.dog_breed||"未記入"]}),(0,r.jsxs)("div",{children:["体重: ",e.dog_weight||"未記入"]})]})]}),(0,r.jsxs)("div",{children:[r.jsx("h4",{className:"font-medium text-sm text-gray-700 mb-2",children:"ステータス"}),(0,r.jsxs)("div",{className:"bg-gray-50 p-3 rounded space-y-2",children:[r.jsx(o.C,{variant:"pending"===e.status?"secondary":"approved"===e.status?"default":"destructive",className:"w-fit",children:"pending"===e.status?"審査中":"approved"===e.status?"承認済み":"却下"}),e.admin_notes&&(0,r.jsxs)("div",{className:"text-sm text-gray-600",children:["メモ: ",e.admin_notes]})]})]})]}),"pending"===e.status&&(0,r.jsxs)("div",{className:"flex space-x-3 pt-4 border-t",children:[(0,r.jsxs)(i.z,{onClick:()=>b(e.id),className:"bg-green-600 hover:bg-green-700 text-white",children:[r.jsx(h.Z,{className:"h-4 w-4 mr-2"}),"承認"]}),(0,r.jsxs)(i.z,{onClick:()=>N(e.id),variant:"destructive",children:[r.jsx(u.Z,{className:"h-4 w-4 mr-2"}),"却下"]})]})]})},e.id))})]})}},567:(e,t,a)=>{"use strict";a.d(t,{C:()=>o});var r=a(326);a(7577);var s=a(9360),n=a(7863);let i=(0,s.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o({className:e,variant:t,...a}){return r.jsx("div",{className:(0,n.cn)(i({variant:t}),e),...a})}},6824:(e,t,a)=>{"use strict";a.d(t,{x1:()=>o});var r=a(4099);let s={baseURL:"http://localhost:8000".replace(/\/$/,""),timeout:1e4,headers:{"Content-Type":"application/json"}};class n extends Error{constructor(e,t,a){super(t),this.status=e,this.message=t,this.data=a,this.name="ApiError"}}let i=(()=>{let e=r.Z.create(s);return e.interceptors.request.use(e=>{let t=localStorage.getItem("access_token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e)),e.interceptors.response.use(e=>e,e=>{if(e.response){let{status:t,data:a}=e.response;throw new n(t,a?.detail||"APIエラーが発生しました",a)}throw new n(0,"ネットワークエラーが発生しました")}),e})(),o={login:async e=>{try{let t=await i.post("/auth/login",e),{access_token:a}=t.data;return localStorage.setItem("access_token",a),t.data}catch(e){throw e}},submitApplication:async e=>{try{let t=new FormData;return t.append("full_name",e.full_name),t.append("email",e.email),t.append("phone_number",e.phone_number),t.append("postal_code",e.postal_code),t.append("prefecture",e.prefecture),t.append("city",e.city),t.append("street",e.street),t.append("building",e.building),t.append("imabari_residency",e.imabari_residency),t.append("password",e.password),t.append("dog_name",e.dog_name),t.append("dog_breed",e.dog_breed),t.append("dog_weight",e.dog_weight.toString()),e.vaccination_certificate&&t.append("vaccination_certificate",e.vaccination_certificate),(await i.post("/auth/apply",t,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(e){throw e}},applyRegistration:async e=>{try{return(await i.post("/auth/apply",e)).data}catch(e){throw e}},getApplicationStatus:async e=>{try{return(await i.get(`/auth/application-status/${e}`)).data}catch(e){throw e}},register:async e=>{try{let t=new FormData;return t.append("email",e.email),t.append("password",e.password),t.append("fullName",e.fullName),t.append("address",e.address),t.append("phoneNumber",e.phoneNumber),t.append("imabariResidency",e.imabariResidency),t.append("vaccinationCertificate",e.vaccinationCertificate),(await i.post("/auth/register",t,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(e){throw e}},forgotPassword:async e=>{try{return(await i.post("/auth/forgot-password",{email:e})).data}catch(e){throw e}},logout:()=>{localStorage.removeItem("access_token")},getUserProfile:async()=>{try{return(await i.get("/users/profile")).data}catch(e){throw e}},getUserDogs:async()=>{try{return(await i.get("/dogs")).data}catch(e){throw e}},addDog:async e=>{try{return(await i.post("/dogs",e)).data}catch(e){throw e}},updateDog:async(e,t)=>{try{return(await i.put(`/dogs/${e}`,t)).data}catch(e){throw e}},deleteDog:async e=>{try{return(await i.delete(`/dogs/${e}`)).data}catch(e){throw e}},getVaccinationRecords:async e=>{try{return(await i.get(`/dogs/${e}/vaccinations`)).data}catch(e){throw e}},addVaccinationRecord:async(e,t)=>{try{return(await i.post(`/dogs/${e}/vaccinations`,t)).data}catch(e){throw e}},getCurrentUser:async()=>{try{return(await i.get("/users/me")).data}catch(e){throw e}},updateUserProfile:async e=>{try{return(await i.put("/users/profile",e)).data}catch(e){throw e}},getUserDogs:async()=>{try{return(await i.get("/dogs")).data}catch(e){throw e}},addDog:async e=>{try{let t=new FormData;return t.append("name",e.name),t.append("breed",e.breed),t.append("weight",e.weight),t.append("personality",JSON.stringify(e.personality)),t.append("lastVaccinationDate",e.lastVaccinationDate),t.append("vaccinationCertificate",e.vaccinationCertificate),(await i.post("/dogs",t,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(e){throw e}},updateDog:async(e,t)=>{try{return(await i.put(`/dogs/${e}`,t)).data}catch(e){throw e}},deleteDog:async e=>{try{return(await i.delete(`/dogs/${e}`)).data}catch(e){throw e}},getPosts:async e=>{try{return(await i.get("/posts",{params:e})).data}catch(e){throw e}},createPost:async e=>{try{let t=new FormData;return t.append("content",e.content),t.append("category",e.category),e.hashtags&&t.append("hashtags",e.hashtags),e.image&&t.append("image",e.image),(await i.post("/posts",t,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(e){throw e}},likePost:async e=>{try{return(await i.post(`/posts/${e}/like`)).data}catch(e){throw e}},addComment:async e=>{try{return(await i.post(`/posts/${e.postId}/comments`,{text:e.text})).data}catch(e){throw e}},getEvents:async(e=!0)=>{try{return(await i.get("/events",{params:{upcoming_only:e}})).data}catch(e){throw e}},getEventDetail:async e=>{try{return(await i.get(`/events/${e}`)).data}catch(e){throw e}},registerForEvent:async(e,t)=>{try{return(await i.post(`/events/${e}/register`,{dog_ids:t})).data}catch(e){throw e}},cancelEventRegistration:async e=>{try{return(await i.delete(`/events/${e}/register`)).data}catch(e){throw e}},getEventParticipants:async e=>{try{return(await i.get(`/events/${e}/participants`)).data}catch(e){throw e}},getCalendar:async(e,t)=>{try{return(await i.get(`/calendar/${e}/${t}`)).data}catch(e){throw e}},getNotices:async()=>{try{return(await i.get("/notices")).data}catch(e){throw e}},markNoticeAsRead:async e=>{try{return(await i.put(`/notices/${e}/read`)).data}catch(e){throw e}},generateQRCode:async()=>{try{return(await i.get("/entry/qrcode")).data}catch(e){throw e}},scanQRCode:async e=>{try{return(await i.post("/entry/scan",e)).data}catch(e){throw e}},enterDogRun:async e=>{try{return(await i.post("/entry/enter",{dog_ids:e})).data}catch(e){throw e}},exitDogRun:async()=>{try{return(await i.post("/entry/exit")).data}catch(e){throw e}},getCurrentVisitors:async()=>{try{return(await i.get("/entry/current")).data}catch(e){throw e}},getEntryHistory:async(e=50)=>{try{return(await i.get("/entry/history",{params:{limit:e}})).data}catch(e){throw e}},getTags:async()=>{try{return(await i.get("/tags")).data}catch(e){throw e}},adminLogin:async(e,t)=>{try{return(await i.post("/admin/auth/login",{email:e,password:t})).data}catch(e){throw e}},getAdminApplications:async()=>{try{let e=localStorage.getItem("admin_access_token");return(await i.get("/admin/applications",{headers:{Authorization:`Bearer ${e}`}})).data}catch(e){throw e}},approveApplication:async(e,t)=>{try{let a=localStorage.getItem("admin_access_token");return(await i.put(`/admin/applications/${e}/approve`,{admin_notes:t},{headers:{Authorization:`Bearer ${a}`}})).data}catch(e){throw e}},rejectApplication:async(e,t)=>{try{let a=localStorage.getItem("admin_access_token");return(await i.put(`/admin/applications/${e}/reject`,{rejection_reason:t,admin_notes:t},{headers:{Authorization:`Bearer ${a}`}})).data}catch(e){throw e}}}},5932:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(2881).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},2887:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(2881).Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},1123:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});let r=(0,a(8570).createProxy)(String.raw`/Users/hirotakoyanaka/Desktop/里山ドッグラン2/satoyama_dogrun_frontend-main/app/admin/applications/page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[819,891,999,326,533],()=>a(6411));module.exports=r})();