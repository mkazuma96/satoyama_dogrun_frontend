(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[602],{3764:function(e,s,a){Promise.resolve().then(a.bind(a,3737))},3737:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return g}});var t=a(7437),r=a(2265),i=a(6013),c=a(495),n=a(4693),l=a(2022),d=a(4086),x=a(9832),m=a(2536),o=a(2940),h=a(1935),p=a(933),j=a(6264),u=a(7776);function g(){let[e,s]=(0,r.useState)(!0),[a,g]=(0,r.useState)(null),[v,N]=(0,r.useState)("pending"),[f,y]=(0,r.useState)([]);(0,r.useEffect)(()=>{b()},[]);let b=async()=>{s(!0);try{console.log("Fetching applications...");let e=await j.x1.getAdminApplications();console.log("Applications response:",e),y(Array.isArray(e)?e:e.applications||[]),g(null)}catch(s){var e,a;console.error("Applications fetch error:",s),g((null===(a=s.response)||void 0===a?void 0:null===(e=a.data)||void 0===e?void 0:e.detail)||"申請データの取得に失敗しました"),u.Am.error("申請データの取得に失敗しました")}finally{s(!1)}},w=async e=>{try{await j.x1.approveApplication(e,"承認"),u.Am.success("申請を承認しました"),b()}catch(e){console.error("Approval error:",e),u.Am.error("承認に失敗しました")}},A=async e=>{try{await j.x1.rejectApplication(e,"却下"),u.Am.success("申請を却下しました"),b()}catch(e){console.error("Rejection error:",e),u.Am.error("却下に失敗しました")}},Z=f.filter(e=>"pending"===v?"pending"===e.status:"approved"===v?"approved"===e.status:"rejected"!==v||"rejected"===e.status);return e?(0,t.jsx)("div",{className:"p-6",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600 mx-auto"}),(0,t.jsx)("p",{className:"mt-4 text-gray-600",children:"申請データを読み込み中..."})]})}):a?(0,t.jsx)("div",{className:"p-6",children:(0,t.jsxs)("div",{className:"text-center text-red-600",children:[(0,t.jsxs)("p",{children:["エラー: ",a]}),(0,t.jsx)(c.z,{onClick:b,className:"mt-4",children:"再試行"})]})}):(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"申請管理"}),(0,t.jsxs)("div",{className:"flex space-x-1 bg-gray-100 p-1 rounded-lg w-fit",children:[(0,t.jsxs)(c.z,{variant:"pending"===v?"default":"ghost",size:"sm",onClick:()=>N("pending"),className:"relative",children:[(0,t.jsx)(p.Z,{className:"h-4 w-4 mr-2"}),"審査中",f.filter(e=>"pending"===e.status).length>0&&(0,t.jsx)(n.C,{variant:"secondary",className:"ml-2",children:f.filter(e=>"pending"===e.status).length})]}),(0,t.jsxs)(c.z,{variant:"approved"===v?"default":"ghost",size:"sm",onClick:()=>N("approved"),children:[(0,t.jsx)(o.Z,{className:"h-4 w-4 mr-2"}),"承認済み"]}),(0,t.jsxs)(c.z,{variant:"rejected"===v?"default":"ghost",size:"sm",onClick:()=>N("rejected"),children:[(0,t.jsx)(h.Z,{className:"h-4 w-4 mr-2"}),"却下"]})]})]}),(0,t.jsx)("div",{className:"space-y-4",children:0===Z.length?(0,t.jsx)(i.Zb,{children:(0,t.jsx)(i.aY,{className:"pt-6",children:(0,t.jsx)("div",{className:"text-center text-gray-500 py-8",children:(0,t.jsx)("p",{children:"pending"===v?"審査中の申請はありません":"approved"===v?"承認済みの申請はありません":"却下された申請はありません"})})})}):Z.map(e=>(0,t.jsx)(i.Zb,{className:"mb-4",children:(0,t.jsxs)(i.aY,{className:"pt-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)(l.Z,{className:"h-5 w-5 text-blue-600"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-lg",children:e.user_name}),(0,t.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,t.jsx)(d.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:e.user_email})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,t.jsx)(x.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:e.user_phone})]})]})]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("div",{className:"text-sm text-gray-500 mb-1",children:"申請日"}),(0,t.jsx)("div",{className:"font-medium",children:new Date(e.created_at).toLocaleDateString("ja-JP")})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium text-sm text-gray-700 mb-2",children:"犬の情報"}),(0,t.jsxs)("div",{className:"bg-gray-50 p-3 rounded space-y-2 text-sm text-gray-600",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(m.Z,{className:"h-4 w-4 text-gray-500"}),(0,t.jsxs)("span",{children:["名前: ",e.dog_name]})]}),(0,t.jsxs)("div",{children:["犬種: ",e.dog_breed||"未記入"]}),(0,t.jsxs)("div",{children:["体重: ",e.dog_weight||"未記入"]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium text-sm text-gray-700 mb-2",children:"ステータス"}),(0,t.jsxs)("div",{className:"bg-gray-50 p-3 rounded space-y-2",children:[(0,t.jsx)(n.C,{variant:"pending"===e.status?"secondary":"approved"===e.status?"default":"destructive",className:"w-fit",children:"pending"===e.status?"審査中":"approved"===e.status?"承認済み":"却下"}),e.admin_notes&&(0,t.jsxs)("div",{className:"text-sm text-gray-600",children:["メモ: ",e.admin_notes]})]})]})]}),"pending"===e.status&&(0,t.jsxs)("div",{className:"flex space-x-3 pt-4 border-t",children:[(0,t.jsxs)(c.z,{onClick:()=>w(e.id),className:"bg-green-600 hover:bg-green-700 text-white",children:[(0,t.jsx)(o.Z,{className:"h-4 w-4 mr-2"}),"承認"]}),(0,t.jsxs)(c.z,{onClick:()=>A(e.id),variant:"destructive",children:[(0,t.jsx)(h.Z,{className:"h-4 w-4 mr-2"}),"却下"]})]})]})},e.id))})]})}},4086:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(8030).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},9832:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(8030).Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])}},function(e){e.O(0,[485,776,137,952,971,23,744],function(){return e(e.s=3764)}),_N_E=e.O()}]);