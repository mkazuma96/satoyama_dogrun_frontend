(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{5531:function(e,s,a){Promise.resolve().then(a.bind(a,7403))},7403:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return eS}});var t=a(7437),l=a(2265),r=a(9321),n=a(6600),i=a(3852),c=a(7583),o=a(2810),d=a(1240),m=a(495),x=a(7776),h=a(4207),u=a(933),g=a(6013),p=a(4693),f=a(837),j=a(3102),b=a(7135),N=a(6294),y=a(1822);let v=["トイ・プードル","チワワ","ミニチュア・ダックスフンド","ポメラニアン","マルチーズ","シーズー","パピヨン","ヨークシャー・テリア","ペキニーズ","ジャック・ラッセル・テリア","ビション・フリーゼ","フレンチ・ブルドッグ","柴犬","コーギー","キャバリア・キング・チャールズ・スパニエル","シェットランド・シープドッグ","ビーグル","ボストン・テリア","アメリカン・コッカー・スパニエル","ゴールデン・レトリーバー","ラブラドール・レトリーバー","シベリアン・ハスキー","バーニーズ・マウンテン・ドッグ","ボーダー・コリー","ドーベルマン","グレート・ピレニーズ","ジャーマン・シェパード・ドッグ","秋田犬","その他"],w=[{id:1,breed:"柴犬",vaccinationStatus:"ワクチン済",characteristics:["人懐っこい","活発"],timeSpent:"30分前から",icon:"\uD83D\uDC15"},{id:2,breed:"ボーダーコリー",vaccinationStatus:"ワクチン済",characteristics:["遊び好き","賢い"],timeSpent:"1時間前から",icon:"\uD83D\uDC15"},{id:3,breed:"トイプードル",vaccinationStatus:"ワクチン済",characteristics:["おとなしい","甘えん坊"],timeSpent:"15分前から",icon:"\uD83D\uDC15"}];function C(e){let{userStatus:s,setUserStatus:a,showTerms:r,setShowTerms:n,loginError:i,setLoginError:c,vaccinationCertificateFile:o,setVaccinationCertificateFile:C,selectedImabariResidency:k,setSelectedImabariResidency:S,handleRegistrationSubmit:D,handleLoginSubmit:_,handleForgotPasswordSubmit:I,handleDemoLogin:Z,handleLogout:z,onCheckApplicationStatus:F,postalCode:L,setPostalCode:P,prefecture:E,setPrefecture:R,city:J,setCity:A,street:O,setStreet:Y,building:q,setBuilding:V,applicationDate:M,setApplicationDate:B}=e,[T,Q]=(0,l.useState)(""),[K,$]=(0,l.useState)(""),[H,U]=(0,l.useState)(""),W=async e=>{let s=e.target.value.replace(/-/g,"");if(P(s),7===s.length)try{let e=await fetch("https://madefor.github.io/postal-code-api/api/v1/".concat(s.substring(0,3),"/").concat(s.substring(3,7),".json")),a=await e.json();if(a&&a.data&&a.data.length>0){let e=a.data[0].ja;R(e.prefecture),A(e.address1+e.address2),Y(e.address3)}else R(""),A(""),Y(""),alert("郵便番号が見つかりません。住所を手動で入力してください。")}catch(e){console.error("郵便番号検索エラー:",e),alert("郵便番号検索中にエラーが発生しました。住所を手動で入力してください。")}};return new Date().toLocaleDateString("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit"}),(0,t.jsx)("section",{id:"home",className:"relative w-full",children:(0,t.jsx)("div",{className:"container px-4 md:px-6",children:(0,t.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,t.jsx)("div",{className:"bg-blue-900 text-white p-4 rounded-lg",children:(0,t.jsx)("div",{className:"text-center",children:(0,t.jsx)("div",{className:"text-lg font-bold",children:"本日開館 | 9:00~17:00"})})}),(0,t.jsx)(g.Zb,{className:"border-gray-200",children:(0,t.jsx)(g.aY,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(h.Z,{className:"h-5 w-5 text-blue-900"}),(0,t.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"現在の利用状況"})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("div",{className:"text-2xl font-bold text-blue-900",children:[w.length,"匹"]}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:"最終更新: 5分前"})]})]})})}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(d.Z,{className:"h-5 w-5 text-blue-900"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"現在利用中のワンちゃん"})]}),w.map(e=>(0,t.jsx)(g.Zb,{className:"border-gray-200",children:(0,t.jsx)(g.aY,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-yellow-200 rounded-full flex items-center justify-center text-lg",children:e.icon}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex flex-wrap gap-2 mb-2",children:[(0,t.jsx)(p.C,{variant:"secondary",className:"text-xs",children:e.breed}),(0,t.jsx)(p.C,{variant:"outline",className:"text-xs bg-green-100 text-green-800 border-green-300",children:e.vaccinationStatus}),e.characteristics.map((e,s)=>(0,t.jsx)(p.C,{variant:"outline",className:"text-xs",children:e},s))]}),(0,t.jsxs)("div",{className:"flex items-center space-x-1 text-sm text-gray-600",children:[(0,t.jsx)(u.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:e.timeSpent})]})]})]})})},e.id))]}),s!==y.J0.LoggedIn&&s!==y.J0.LoginForm&&s!==y.J0.ForgotPasswordForm&&s!==y.J0.ForgotPasswordSent&&s!==y.J0.RegistrationForm&&(0,t.jsx)(g.Zb,{className:"border-gray-200 bg-gray-50",children:(0,t.jsxs)(g.aY,{className:"p-6 text-center",children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-blue-900 mb-3",children:"里山ドッグランのご利用には申請が必要です"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-6 leading-relaxed",children:"安全で快適な環境を提供するため、初回利用時には簡単な申請と審査をお願いしております。"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(m.z,{onClick:()=>a(y.J0.RegistrationForm),className:"w-full bg-blue-900 hover:bg-blue-800 text-white",children:"利用申請をする"}),(0,t.jsxs)("div",{className:"flex space-x-3",children:[(0,t.jsx)(m.z,{onClick:()=>a(y.J0.LoginForm),variant:"outline",className:"flex-1 border-blue-900 text-blue-900 hover:bg-blue-50",children:"ログイン"}),(0,t.jsx)(m.z,{onClick:()=>window.open("/admin","_blank"),variant:"outline",className:"flex-1 border-gray-400 text-gray-600 hover:bg-gray-50",children:"管理者ログイン"})]})]})]})}),s===y.J0.RegistrationForm&&(0,t.jsx)("div",{className:"space-y-6 mt-6",children:(0,t.jsx)(g.Zb,{className:"border-asics-blue-100",children:(0,t.jsx)(g.aY,{className:"p-4",children:(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault(),console.log("Form submit clicked!"),console.log("Values:",{postalCode:L,prefecture:E,city:J,street:O,building:q,applicationDate:M});try{D(e,L,E,J,O,q,M)}catch(e){console.error("Form submission error:",e),x.Am.error("フォーム送信でエラーが発生しました: "+((null==e?void 0:e.message)||"不明なエラー"))}},className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("input",{id:"agree",name:"agree",type:"checkbox",className:"h-4 w-4 text-blue-600 border-gray-300 rounded",required:!0}),(0,t.jsxs)("label",{htmlFor:"agree",className:"ml-2 block text-sm text-gray-900 font-caption",children:["利用規約・確認事項を読み、",(0,t.jsxs)(f.Vq,{open:r,onOpenChange:n,children:[(0,t.jsx)(f.hg,{asChild:!0,children:(0,t.jsx)(m.z,{variant:"link",className:"p-0 h-auto text-blue-600 text-sm font-caption",children:"こちら"})}),(0,t.jsxs)(f.cZ,{className:"sm:max-w-[425px] max-h-[80vh] overflow-y-auto",children:[(0,t.jsx)(f.fK,{children:(0,t.jsx)(f.$N,{className:"font-heading",children:"利用規約"})}),(0,t.jsx)("div",{className:"prose prose-sm max-w-none text-gray-700 whitespace-pre-wrap font-caption",children:y.Tu})]})]}),"に同意します"]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(b._,{htmlFor:"applicationDate",className:"block text-sm font-caption font-medium text-gray-700",children:"申込年月日"}),(0,t.jsx)(j.I,{type:"date",id:"applicationDate",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,value:M,onChange:e=>B(e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(b._,{htmlFor:"postalCode",className:"block text-sm font-caption font-medium text-gray-700",children:"郵便番号"}),(0,t.jsx)(j.I,{type:"text",id:"postalCode",name:"postalCode",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"例: 123-4567",maxLength:8,required:!0,value:L,onChange:e=>P(e.target.value),onBlur:W})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(b._,{htmlFor:"prefecture",className:"block text-sm font-caption font-medium text-gray-700",children:"住所（都道府県）"}),(0,t.jsx)(j.I,{type:"text",id:"prefecture",name:"prefecture",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"例: 東京都",required:!0,value:E,onChange:e=>R(e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(b._,{htmlFor:"city",className:"block text-sm font-caption font-medium text-gray-700",children:"住所（市区町村）"}),(0,t.jsx)(j.I,{type:"text",id:"city",name:"city",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"例: 渋谷区",required:!0,value:J,onChange:e=>A(e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(b._,{htmlFor:"street",className:"block text-sm font-caption font-medium text-gray-700",children:"住所（番地）"}),(0,t.jsx)(j.I,{type:"text",id:"street",name:"street",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"例: 1-1-1",required:!0,value:O,onChange:e=>Y(e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(b._,{htmlFor:"building",className:"block text-sm font-caption font-medium text-gray-700",children:"住所（マンション名・部屋番号など）"}),(0,t.jsx)(j.I,{type:"text",id:"building",name:"building",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"例: 〇〇マンション101号室 (任意)",value:q,onChange:e=>V(e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(b._,{htmlFor:"fullName",className:"block text-sm font-caption font-medium text-gray-700",children:"お名前 (フルネーム)"}),(0,t.jsx)(j.I,{type:"text",id:"fullName",name:"fullName",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"田中 太郎",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(b._,{htmlFor:"email",className:"block text-sm font-caption font-medium text-gray-700",children:"Emailアドレス (連絡先)"}),(0,t.jsx)(j.I,{type:"email",id:"email",name:"email",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"your@example.com",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(b._,{htmlFor:"phoneNumber",className:"block text-sm font-caption font-medium text-gray-700",children:"携帯電話番号 (緊急時連絡先)"}),(0,t.jsx)(j.I,{type:"tel",id:"phoneNumber",name:"phoneNumber",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"090-1234-5678",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(b._,{htmlFor:"imabariResidency",className:"block text-sm font-caption font-medium text-gray-700",children:"今治市内の居住歴"}),(0,t.jsxs)(N.Ph,{onValueChange:S,value:k,required:!0,children:[(0,t.jsx)(N.i4,{id:"imabariResidency",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 [&>svg]:!hidden justify-start",children:(0,t.jsx)(N.ki,{placeholder:"選択してください",className:"text-left"})}),(0,t.jsxs)(N.Bw,{children:[(0,t.jsx)(N.Ql,{value:y.C$.LessThan1Year,children:"1年未満"}),(0,t.jsx)(N.Ql,{value:y.C$.OneToThreeYears,children:"1年以上3年未満"}),(0,t.jsx)(N.Ql,{value:y.C$.ThreeToFiveYears,children:"3年以上5年未満"}),(0,t.jsx)(N.Ql,{value:y.C$.MoreThan5Years,children:"5年以上"}),(0,t.jsx)(N.Ql,{value:y.C$.NotInImabari,children:"今治市内には住んでいない"})]})]}),(0,t.jsx)("input",{type:"hidden",name:"imabariResidency",value:k})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(b._,{htmlFor:"dogName",className:"block text-sm font-caption font-medium text-gray-700",children:"ワンちゃんのお名前"}),(0,t.jsx)(j.I,{type:"text",id:"dogName",name:"dogName",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"ポチ",required:!0,value:T,onChange:e=>Q(e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(b._,{htmlFor:"dogBreed",className:"block text-sm font-caption font-medium text-gray-700",children:"犬種"}),(0,t.jsxs)(N.Ph,{onValueChange:$,value:K,required:!0,children:[(0,t.jsx)(N.i4,{id:"dogBreed",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 [&>svg]:!hidden justify-start",children:(0,t.jsx)(N.ki,{placeholder:"犬種を選ぶ",className:"text-left"})}),(0,t.jsx)(N.Bw,{children:v.map(e=>(0,t.jsx)(N.Ql,{value:e,children:e},e))})]}),(0,t.jsx)("input",{type:"hidden",name:"dogBreed",value:K}),"その他"===K&&(0,t.jsx)(j.I,{type:"text",id:"otherDogBreed",className:"mt-2 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"犬種を入力してください",value:"その他"===K?"":K,onChange:e=>$(e.target.value),required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(b._,{htmlFor:"dogWeight",className:"block text-sm font-caption font-medium text-gray-700",children:"ワンちゃんの体重 (kg)"}),(0,t.jsx)(j.I,{type:"number",id:"dogWeight",name:"dogWeight",step:"0.1",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"8.5",required:!0,value:H,onChange:e=>U(e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)(b._,{htmlFor:"vaccinationCertificate",className:"block text-sm font-caption font-medium text-gray-700",children:["ワクチンの接種証明書 (ファイル添付) ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)(j.I,{type:"file",id:"vaccinationCertificate",name:"vaccinationCertificate",accept:".pdf,.jpg,.jpeg,.png",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",onChange:e=>C(e.target.files?e.target.files[0]:null),required:!0}),o&&(0,t.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["選択中のファイル: ",o.name]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(b._,{htmlFor:"password",className:"block text-sm font-caption font-medium text-gray-700",children:"ログインパスワード"}),(0,t.jsx)(j.I,{type:"password",id:"password",name:"password",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(b._,{htmlFor:"confirmPassword",className:"block text-sm font-caption font-medium text-gray-700",children:"ログインパスワード (確認用)"}),(0,t.jsx)(j.I,{type:"password",id:"confirmPassword",name:"confirmPassword",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),(0,t.jsx)(m.z,{type:"submit",className:"w-full font-caption",onClick:()=>console.log("Button clicked directly!"),children:"利用申請"})]})})})}),s===y.J0.RegistrationPending&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h2",{className:"text-lg font-heading mb-4",style:{color:"rgb(0, 8, 148)"},children:"申請中です"}),(0,t.jsx)("p",{className:"text-gray-500 dark:text-gray-400 font-caption",children:"利用申請ありがとうございます。管理者の承認をお待ちください。"}),(0,t.jsx)(m.z,{onClick:F,variant:"outline",className:"w-full font-caption",children:"申請状況を確認"}),(0,t.jsx)(m.z,{onClick:z,className:"w-full font-caption",children:"ログアウト"})]}),s===y.J0.LoggedIn&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(m.z,{onClick:z,className:"w-full font-caption",children:"ログアウト"}),(0,t.jsx)(m.z,{onClick:()=>window.open("/admin","_blank"),variant:"outline",className:"w-full font-caption border-gray-400 text-gray-600 hover:bg-gray-50",children:"管理者ログイン"})]}),s===y.J0.LoginForm&&(0,t.jsx)("div",{className:"space-y-6 mt-6",children:(0,t.jsx)(g.Zb,{className:"border-asics-blue-100",children:(0,t.jsxs)(g.aY,{className:"p-4",children:[(0,t.jsxs)("form",{onSubmit:_,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(b._,{htmlFor:"loginEmail",className:"block text-sm font-caption font-medium text-gray-700",children:"Emailアドレス"}),(0,t.jsx)(j.I,{type:"email",id:"loginEmail",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"your@example.com",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(b._,{htmlFor:"loginPassword",className:"block text-sm font-caption font-medium text-gray-700",children:"パスワード"}),(0,t.jsx)(j.I,{type:"password",id:"loginPassword",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),i&&(0,t.jsx)("p",{className:"text-red-500 text-sm font-caption",children:i}),(0,t.jsx)(m.z,{type:"submit",className:"w-full font-caption",children:"ログイン"}),(0,t.jsx)(m.z,{type:"button",onClick:()=>a(y.J0.ForgotPasswordForm),variant:"link",className:"w-full font-caption",children:"パスワードをお忘れですか？"})]}),(0,t.jsx)("div",{className:"mt-4 text-left text-sm",children:(0,t.jsx)(m.z,{onClick:Z,variant:"outline",className:"w-full font-caption",children:"デモで試す"})})]})})}),s===y.J0.ForgotPasswordForm&&(0,t.jsxs)("div",{className:"space-y-6 mt-6",children:[(0,t.jsx)("h2",{className:"text-lg font-heading mb-4",style:{color:"rgb(0, 8, 148)"},children:"パスワードをリセット"}),(0,t.jsx)(g.Zb,{className:"border-asics-blue-100",children:(0,t.jsx)(g.aY,{className:"p-4",children:(0,t.jsxs)("form",{onSubmit:I,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(b._,{htmlFor:"resetEmail",className:"block text-sm font-caption font-medium text-gray-700",children:"登録済みのEmailアドレス"}),(0,t.jsx)(j.I,{type:"email",id:"resetEmail",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"your@example.com",required:!0})]}),(0,t.jsx)(m.z,{type:"submit",className:"w-full font-caption",children:"パスワードリセットリンクを送信"}),(0,t.jsx)(m.z,{type:"button",onClick:()=>a(y.J0.LoginForm),variant:"link",className:"w-full font-caption",children:"ログインに戻る"})]})})})]}),s===y.J0.ForgotPasswordSent&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h2",{className:"text-lg font-heading mb-4",style:{color:"rgb(0, 8, 148)"},children:"パスワードリセット"}),(0,t.jsx)("p",{className:"text-gray-500 dark:text-gray-400 font-caption",children:"パスワードリセットのリンクをメールで送信しました。メールを確認し、指示に従ってパスワードを再設定してください。"}),(0,t.jsx)(m.z,{onClick:()=>a(y.J0.LoginForm),className:"w-full font-caption",children:"ログインに戻る"})]})]})})})}var k=a(4241),S=a(7440),D=a(1077),_=a(7079),I=a(514),Z=a(6264);function z(e){let{onEventClick:s}=e,[a,n]=(0,l.useState)([]),[i,c]=(0,l.useState)(!0);(0,l.useEffect)(()=>{o()},[]);let o=async()=>{c(!0);try{let e=await Z.x1.getEvents(!0);n(e)}catch(e){console.error("イベント取得エラー:",e),x.Am.error("イベント情報の取得に失敗しました")}finally{c(!1)}},m=e=>{switch(e){case"reception":case"受付中":return(0,t.jsx)(p.C,{className:"bg-green-500 text-white",children:"受付中"});case"preparing":case"準備中":return(0,t.jsx)(p.C,{className:"bg-yellow-500 text-white",children:"準備中"});case"closed":case"終了":return(0,t.jsx)(p.C,{className:"bg-gray-500 text-white",children:"終了"});default:return(0,t.jsx)(p.C,{children:e})}},h=(e,s)=>{let a=e/s*100;return a>=90?"text-red-500":a>=70?"text-yellow-500":"text-green-500"};return i?(0,t.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2",style:{borderColor:"rgb(0, 8, 148)"}})}):0===a.length?(0,t.jsx)(g.Zb,{className:"border-asics-blue-100",children:(0,t.jsxs)(g.aY,{className:"p-8 text-center",children:[(0,t.jsx)(k.Z,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),(0,t.jsx)("p",{className:"text-gray-500",children:"現在開催予定のイベントはありません"}),(0,t.jsx)("p",{className:"text-sm text-gray-400 mt-2",children:"新しいイベントが追加されるまでお待ちください"})]})}):(0,t.jsx)("div",{className:"space-y-4",children:a.map(e=>(0,t.jsxs)(g.Zb,{className:"border-asics-blue-100 hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>null==s?void 0:s(e.id),children:[(0,t.jsx)(g.Ol,{className:"pb-3",children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(g.ll,{className:"text-lg font-heading",style:{color:"rgb(0, 8, 148)"},children:e.title}),(0,t.jsxs)("div",{className:"flex items-center space-x-2 mt-2",children:[(0,t.jsx)(k.Z,{className:"h-4 w-4 text-gray-500"}),(0,t.jsx)("span",{className:"text-sm text-gray-600",children:(0,_.WU)(new Date(e.event_date),"yyyy年MM月dd日(E)",{locale:I.ja})})]})]}),(0,t.jsxs)("div",{className:"flex flex-col items-end space-y-2",children:[m(e.status),e.is_registered&&(0,t.jsx)(p.C,{variant:"outline",className:"border-green-500 text-green-600",children:"参加登録済"})]})]})}),(0,t.jsxs)(g.aY,{className:"space-y-3",children:[e.description&&(0,t.jsx)("p",{className:"text-sm text-gray-700 line-clamp-2",children:e.description}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(u.Z,{className:"h-4 w-4 text-gray-500"}),(0,t.jsxs)("span",{children:[e.start_time," - ",e.end_time]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(r.Z,{className:"h-4 w-4 text-gray-500"}),(0,t.jsx)("span",{children:e.location})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(d.Z,{className:"h-4 w-4 text-gray-500"}),(0,t.jsxs)("span",{className:h(e.current_participants,e.capacity),children:[e.current_participants,"/",e.capacity,"名"]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(D.Z,{className:"h-4 w-4 text-gray-500"}),(0,t.jsx)("span",{children:e.fee>0?"\xa5".concat(e.fee.toLocaleString()):"無料"})]})]}),e.capacity>0&&(0,t.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,t.jsx)("div",{className:"bg-gradient-to-r from-blue-400 to-blue-600 h-2 rounded-full transition-all",style:{width:"".concat(Math.min(e.current_participants/e.capacity*100,100),"%"),backgroundColor:e.current_participants>=e.capacity?"rgb(239, 68, 68)":void 0}})})]})]},e.id))})}var F=a(4697),L=a(2536),P=a(2022),E=a(9324),R=a(2468);let J=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(E.fC,{ref:s,className:(0,S.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",a),...l,children:(0,t.jsx)(E.z$,{className:(0,S.cn)("flex items-center justify-center text-current"),children:(0,t.jsx)(R.Z,{className:"h-4 w-4"})})})});J.displayName=E.fC.displayName;var A=a(4344);function O(e){let{eventId:s,isOpen:a,onClose:n,onRegistrationChange:i}=e,[c,o]=(0,l.useState)(null),[h,g]=(0,l.useState)([]),[j,b]=(0,l.useState)([]),[N,y]=(0,l.useState)([]),[v,w]=(0,l.useState)(!1),[C,S]=(0,l.useState)(!1),[z,E]=(0,l.useState)(!1);(0,l.useEffect)(()=>{s&&a&&(R(),O())},[s,a]);let R=async()=>{if(s){w(!0);try{let e=await Z.x1.getEventDetail(s);o(e),y(e.my_dogs_registered||[]);let a=await Z.x1.getEventParticipants(s);g(a)}catch(e){console.error("イベント詳細取得エラー:",e),x.Am.error("イベント情報の取得に失敗しました")}finally{w(!1)}}},O=async()=>{try{let e=await Z.x1.getUserDogs();b(e)}catch(e){console.error("犬情報取得エラー:",e)}},Y=async()=>{if(c){S(!0);try{c.is_registered?(await Z.x1.cancelEventRegistration(c.id),x.Am.success("参加をキャンセルしました")):(await Z.x1.registerForEvent(c.id,N),x.Am.success("イベントに参加登録しました")),await R(),null==i||i()}catch(a){var e,s;console.error("登録エラー:",a),x.Am.error((null===(s=a.response)||void 0===s?void 0:null===(e=s.data)||void 0===e?void 0:e.detail)||"処理に失敗しました")}finally{S(!1)}}},q=e=>{y(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])};if(!c||v)return(0,t.jsx)(f.Vq,{open:a,onOpenChange:n,children:(0,t.jsx)(f.cZ,{className:"sm:max-w-[600px]",children:(0,t.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2",style:{borderColor:"rgb(0, 8, 148)"}})})})});let V=c.capacity>0&&c.current_participants>=c.capacity,M=!V&&"reception"===c.status||"受付中"===c.status;return(0,t.jsx)(f.Vq,{open:a,onOpenChange:n,children:(0,t.jsxs)(f.cZ,{className:"sm:max-w-[600px] max-h-[80vh] overflow-y-auto",children:[(0,t.jsxs)(f.fK,{children:[(0,t.jsx)(f.$N,{className:"text-xl font-heading",style:{color:"rgb(0, 8, 148)"},children:c.title}),(0,t.jsx)("button",{onClick:n,className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100",children:(0,t.jsx)(F.Z,{className:"h-4 w-4"})})]}),(0,t.jsxs)("div",{className:"space-y-4 mt-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:["reception"===c.status||"受付中"===c.status?(0,t.jsx)(p.C,{className:"bg-green-500 text-white",children:"受付中"}):"closed"===c.status||"終了"===c.status?(0,t.jsx)(p.C,{className:"bg-gray-500 text-white",children:"終了"}):(0,t.jsx)(p.C,{className:"bg-yellow-500 text-white",children:"準備中"}),c.is_registered&&(0,t.jsx)(p.C,{variant:"outline",className:"border-green-500 text-green-600",children:"参加登録済"}),V&&(0,t.jsx)(p.C,{className:"bg-red-500 text-white",children:"満員"})]}),c.description&&(0,t.jsx)("div",{className:"p-4 bg-gray-50 rounded-lg",children:(0,t.jsx)("p",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:c.description})}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)(k.Z,{className:"h-5 w-5 text-gray-500"}),(0,t.jsx)("span",{className:"font-medium",children:(0,_.WU)(new Date(c.event_date),"yyyy年MM月dd日(E)",{locale:I.ja})})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)(u.Z,{className:"h-5 w-5 text-gray-500"}),(0,t.jsxs)("span",{children:[c.start_time," - ",c.end_time]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)(r.Z,{className:"h-5 w-5 text-gray-500"}),(0,t.jsx)("span",{children:c.location})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)(d.Z,{className:"h-5 w-5 text-gray-500"}),(0,t.jsxs)("span",{className:V?"text-red-500 font-bold":"",children:["参加者: ",c.current_participants,"/",c.capacity,"名"]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)(D.Z,{className:"h-5 w-5 text-gray-500"}),(0,t.jsx)("span",{className:"font-medium",children:c.fee>0?"参加費: \xa5".concat(c.fee.toLocaleString()):"参加費: 無料"})]})]}),c.capacity>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3",children:(0,t.jsx)("div",{className:"h-3 rounded-full transition-all",style:{width:"".concat(Math.min(c.current_participants/c.capacity*100,100),"%"),backgroundColor:V?"rgb(239, 68, 68)":"rgb(59, 130, 246)"}})}),(0,t.jsxs)("p",{className:"text-xs text-gray-500 mt-1 text-right",children:[Math.round(c.current_participants/c.capacity*100),"% 埋まっています"]})]}),(0,t.jsx)(A.Z,{}),!c.is_registered&&j.length>0&&M&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-medium mb-3",children:"参加させる犬を選択"}),(0,t.jsx)("div",{className:"space-y-2",children:j.map(e=>(0,t.jsxs)("div",{className:"flex items-center space-x-3 p-2 rounded hover:bg-gray-50",children:[(0,t.jsx)(J,{checked:N.includes(e.id),onCheckedChange:()=>q(e.id)}),(0,t.jsx)(L.Z,{className:"h-4 w-4 text-gray-500"}),(0,t.jsx)("span",{className:"text-sm",children:e.name}),e.breed&&(0,t.jsxs)("span",{className:"text-xs text-gray-500",children:["(",e.breed,")"]})]},e.id))}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"※犬を選択しない場合は飼い主のみの参加となります"})]}),c.is_registered&&c.my_dogs_registered.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-medium mb-2",children:"登録済みの犬"}),(0,t.jsx)("div",{className:"space-y-1",children:c.my_dogs_registered.map(e=>{let s=j.find(s=>s.id===e);return s?(0,t.jsxs)("div",{className:"flex items-center space-x-2 text-sm",children:[(0,t.jsx)(L.Z,{className:"h-4 w-4 text-green-500"}),(0,t.jsx)("span",{children:s.name})]},e):null})})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)(m.z,{variant:"ghost",size:"sm",onClick:()=>E(!z),className:"text-sm",children:["参加者一覧 (",h.length,"名) ",z?"▲":"▼"]}),z&&(0,t.jsx)("div",{className:"mt-2 max-h-40 overflow-y-auto border rounded-lg p-3",children:0===h.length?(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"まだ参加者はいません"}):(0,t.jsx)("div",{className:"space-y-2",children:h.map(e=>(0,t.jsxs)("div",{className:"flex items-center space-x-2 text-sm",children:[(0,t.jsx)(P.Z,{className:"h-4 w-4 text-gray-400"}),(0,t.jsx)("span",{children:e.user_name}),e.dog_name&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(L.Z,{className:"h-3 w-3 text-gray-400"}),(0,t.jsxs)("span",{className:"text-gray-600",children:["(",e.dog_name,")"]})]})]},e.id))})})]}),(0,t.jsx)(A.Z,{}),(0,t.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,t.jsx)(m.z,{variant:"outline",onClick:n,children:"閉じる"}),M&&(0,t.jsx)(m.z,{onClick:Y,disabled:C,className:"text-white",style:{backgroundColor:c.is_registered?"rgb(239, 68, 68)":"rgb(0, 8, 148)"},children:C?"処理中...":c.is_registered?"参加をキャンセル":"参加登録する"})]})]})]})})}function Y(e){let{userStatus:s,activeCalendar:a,setActiveCalendar:r,displayDate:n,handlePreviousMonth:i,handleNextMonth:c}=e,[o,d]=(0,l.useState)(null),[x,h]=(0,l.useState)(!1),[u,p]=(0,l.useState)(0),f=n.getFullYear(),j=n.getMonth()+1,b=new Date,N=b.getMonth(),v=new Date(b.getFullYear(),N+1),w=v.getMonth(),C=v.getFullYear(),D=n.getMonth()===N&&n.getFullYear()===b.getFullYear(),_=n.getMonth()===w&&n.getFullYear()===C,I=(0,S.XL)(f,j),Z=(0,S.s8)(f,j),F=a===y.kK.Dogrun?I:Z,L=a===y.kK.Dogrun?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded",style:{backgroundColor:"rgba(0, 8, 148, 0.1)"}}),(0,t.jsx)("span",{className:"text-gray-600 font-caption",children:"開館日"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded",style:{backgroundColor:"rgba(144, 238, 144, 0.3)"}}),(0,t.jsx)("span",{className:"text-gray-600 font-caption",children:"一部開館"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded",style:{backgroundColor:"rgba(255, 235, 0, 0.3)"}}),(0,t.jsx)("span",{className:"text-gray-600 font-caption",children:"休館日"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:"rgb(255, 235, 0)"}}),(0,t.jsx)("span",{className:"text-gray-600 font-caption",children:"イベント日"})]})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded",style:{backgroundColor:"rgba(0, 8, 148, 0.1)"}}),(0,t.jsx)("span",{className:"text-gray-600 font-caption",children:"営業日"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded",style:{backgroundColor:"rgba(144, 238, 144, 0.3)"}}),(0,t.jsx)("span",{className:"text-gray-600 font-caption",children:"一部営業時間"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded",style:{backgroundColor:"rgba(255, 235, 0, 0.3)"}}),(0,t.jsx)("span",{className:"text-gray-600 font-caption",children:"休業日"})]})]});return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsx)("h2",{className:"text-lg font-heading",style:{color:"rgb(0, 8, 148)"},children:"イベント・お知らせ"})}),(0,t.jsxs)("div",{className:"flex justify-center gap-2 mb-4",children:[(0,t.jsx)(m.z,{variant:a===y.kK.Dogrun?"default":"outline",size:"sm",onClick:()=>r(y.kK.Dogrun),className:"text-xs h-8 font-caption ".concat(a===y.kK.Dogrun?"text-white":"border-asics-blue-200"),style:a===y.kK.Dogrun?{backgroundColor:"rgb(0, 8, 148)"}:{color:"rgb(0, 8, 148)"},children:"里山ドッグラン"}),(0,t.jsx)(m.z,{variant:a===y.kK.Salon?"default":"outline",size:"sm",onClick:()=>r(y.kK.Salon),className:"text-xs h-8 font-caption ".concat(a===y.kK.Salon?"text-white":"border-asics-blue-200"),style:a===y.kK.Salon?{backgroundColor:"rgb(0, 8, 148)"}:{color:"rgb(0, 8, 148)"},children:"里山サロン"})]}),(0,t.jsxs)(g.Zb,{className:"border-asics-blue-100",children:[(0,t.jsx)(g.Ol,{className:"pb-3",children:(0,t.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,t.jsx)(m.z,{variant:"ghost",size:"sm",onClick:i,className:"text-asics-blue hover:bg-asics-blue-50 ".concat(D?"opacity-50 cursor-not-allowed":""),disabled:D,children:"今月"}),(0,t.jsxs)(g.ll,{className:"text-base flex items-center font-heading",style:{color:"rgb(0, 8, 148)"},children:[(0,t.jsx)(k.Z,{className:"h-5 w-5 mr-2"}),n.toLocaleDateString("ja-JP",{year:"numeric",month:"long"})]}),(0,t.jsx)(m.z,{variant:"ghost",size:"sm",onClick:c,className:"text-asics-blue hover:bg-asics-blue-50 ".concat(_?"opacity-50 cursor-not-allowed":""),disabled:_,children:"翌月"})]})}),(0,t.jsxs)(g.aY,{children:[(0,t.jsxs)("div",{className:"grid grid-cols-7 gap-1 text-center text-xs mb-2 font-caption",children:[(0,t.jsx)("div",{className:"font-medium text-gray-600",children:"日"}),(0,t.jsx)("div",{className:"font-medium text-gray-600",children:"月"}),(0,t.jsx)("div",{className:"font-medium text-gray-600",children:"火"}),(0,t.jsx)("div",{className:"font-medium text-gray-600",children:"水"}),(0,t.jsx)("div",{className:"font-medium text-gray-600",children:"木"}),(0,t.jsx)("div",{className:"font-medium text-gray-600",children:"金"}),(0,t.jsx)("div",{className:"font-medium text-gray-600",children:"土"})]}),(0,t.jsx)("div",{className:"grid grid-cols-7 gap-1 text-center text-xs",children:F.map((e,s)=>(0,t.jsxs)("div",{className:"p-2 rounded flex flex-col items-center w-full aspect-[2/3] gap-1 ".concat(e.status===y.l0.Empty?"":"cursor-pointer"),style:(0,S.Rt)(e.status),children:[(0,t.jsx)("span",{className:"text-sm font-heading",children:e.date}),e.status===y.l0.Limited&&(0,t.jsx)("span",{className:"text-xs font-caption",children:e.hours}),e.isEventDay&&a===y.kK.Dogrun&&(0,t.jsx)("div",{className:"w-2 h-2 rounded-full mt-1",style:{backgroundColor:"rgb(255, 235, 0)"},title:"イベント開催日"})]},s))}),(0,t.jsxs)("div",{className:"mt-3 flex items-center justify-between text-xs font-caption",children:[(0,t.jsx)("div",{className:"flex items-center space-x-4",children:L}),(0,t.jsx)("span",{className:"text-gray-500",children:n.toLocaleDateString("ja-JP",{month:"long"})})]})]})]}),s===y.J0.LoggedIn?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(z,{onEventClick:e=>{d(e),h(!0)}},u),(0,t.jsx)(O,{eventId:o,isOpen:x,onClose:()=>{h(!1),d(null)},onRegistrationChange:()=>{p(e=>e+1)}})]}):(0,t.jsx)(g.Zb,{className:"border-asics-blue-200",style:{backgroundColor:"rgba(0, 8, 148, 0.05)",borderColor:"rgba(0, 8, 148, 0.2)"},children:(0,t.jsxs)(g.aY,{className:"p-6 text-center",children:[(0,t.jsx)("h3",{className:"text-lg font-heading mb-2",style:{color:"rgb(0, 8, 148)"},children:"イベント参加にはログインが必要です"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 font-caption",children:"イベントの詳細確認や参加登録は、ログイン後にご利用いただけます。"})]})})]})}var q=a(6273),V=a(3550),M=a(969),B=a(4042),T=a(4458);let Q=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(T.fC,{ref:s,className:(0,S.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...l})});Q.displayName=T.fC.displayName,l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(T.Ee,{ref:s,className:(0,S.cn)("aspect-square h-full w-full",a),...l})}).displayName=T.Ee.displayName;let K=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(T.NY,{ref:s,className:(0,S.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...l})});K.displayName=T.NY.displayName;var $=a(7568);function H(e){let{refreshKey:s}=e,[a,r]=(0,l.useState)([]),[n,i]=(0,l.useState)(!0),[o,d]=(0,l.useState)({});(0,l.useEffect)(()=>{h()},[s]);let h=async()=>{i(!0);try{let e=localStorage.getItem("access_token");if(!e){console.error("認証トークンが見つかりません");return}let s=await fetch("".concat("http://localhost:8000","/posts/feed"),{headers:{Authorization:"Bearer ".concat(e)}});if(s.ok){let e=await s.json();r(e)}else console.error("投稿の取得に失敗しました")}catch(e){console.error("投稿取得エラー:",e),x.Am.error("投稿の読み込みに失敗しました")}finally{i(!1)}},u=async(e,s)=>{try{let t=localStorage.getItem("access_token"),l=await fetch("".concat("http://localhost:8000","/posts/").concat(e,"/like"),{method:s?"DELETE":"POST",headers:{Authorization:"Bearer ".concat(t)}});if(l.ok){let t=await l.json();r(a.map(a=>a.id===e?{...a,is_liked:!s,likes_count:t.likes_count||(s?a.likes_count-1:a.likes_count+1)}:a))}}catch(e){console.error("いいねエラー:",e),x.Am.error("いいねの処理に失敗しました")}},p=async e=>{let s=o[e];if(null==s?void 0:s.trim())try{let t=localStorage.getItem("access_token");(await fetch("".concat("http://localhost:8000","/posts/").concat(e,"/comments"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({content:s})})).ok&&(d({...o,[e]:""}),r(a.map(s=>s.id===e?{...s,comments_count:s.comments_count+1}:s)),x.Am.success("コメントを投稿しました"))}catch(e){console.error("コメントエラー:",e),x.Am.error("コメントの投稿に失敗しました")}};return n?(0,t.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2",style:{borderColor:"rgb(0, 8, 148)"}})}):0===a.length?(0,t.jsx)(g.Zb,{className:"border-asics-blue-100",children:(0,t.jsxs)(g.aY,{className:"p-8 text-center",children:[(0,t.jsx)("p",{className:"text-gray-500",children:"まだ投稿がありません"}),(0,t.jsx)("p",{className:"text-sm text-gray-400 mt-2",children:"最初の投稿をしてみましょう！"})]})}):(0,t.jsx)("div",{className:"space-y-4",children:a.map(e=>{var s;return(0,t.jsx)(g.Zb,{className:"border-asics-blue-100",children:(0,t.jsxs)(g.aY,{className:"p-4",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)(Q,{className:"w-10 h-10",children:(0,t.jsx)(K,{style:{backgroundColor:"rgba(0, 8, 148, 0.1)",color:"rgb(0, 8, 148)"},children:e.user_name.charAt(0)})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-heading text-sm",style:{color:"rgb(0, 8, 148)"},children:e.user_name}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:(0,$.Q)(new Date(e.created_at),{addSuffix:!0,locale:I.ja})})]})]}),(0,t.jsx)(m.z,{variant:"ghost",size:"sm",children:(0,t.jsx)(V.Z,{className:"h-4 w-4"})})]}),(0,t.jsx)("div",{className:"mb-3",children:(0,t.jsx)("p",{className:"text-sm font-body whitespace-pre-wrap",children:e.content})}),e.hashtags.length>0&&(0,t.jsx)("div",{className:"flex flex-wrap gap-2 mb-3",children:e.hashtags.map((e,s)=>(0,t.jsxs)("span",{className:"inline-flex items-center text-xs px-2 py-1 rounded-full bg-gray-100 text-gray-600",children:[(0,t.jsx)(M.Z,{className:"h-3 w-3 mr-1"}),e]},s))}),e.images.length>0&&(0,t.jsx)("div",{className:"grid gap-2 mb-3 ".concat(e.images.length>1?"grid-cols-2":"grid-cols-1"),children:e.images.map((e,s)=>(0,t.jsx)("img",{src:"".concat("http://localhost:8000").concat(e),alt:"投稿画像 ".concat(s+1),className:"w-full h-48 object-cover rounded-lg"},s))}),(0,t.jsxs)("div",{className:"flex items-center space-x-4 pt-3 border-t",children:[(0,t.jsxs)(m.z,{variant:"ghost",size:"sm",onClick:()=>u(e.id,e.is_liked),className:e.is_liked?"text-red-500":"text-gray-500",children:[(0,t.jsx)(B.Z,{className:"h-4 w-4 mr-1 ".concat(e.is_liked?"fill-current":"")}),(0,t.jsx)("span",{className:"text-xs",children:e.likes_count})]}),(0,t.jsxs)(m.z,{variant:"ghost",size:"sm",className:"text-gray-500",children:[(0,t.jsx)(c.Z,{className:"h-4 w-4 mr-1"}),(0,t.jsx)("span",{className:"text-xs",children:e.comments_count})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2 mt-3 pt-3 border-t",children:[(0,t.jsx)(j.I,{placeholder:"コメントを入力...",value:o[e.id]||"",onChange:s=>d({...o,[e.id]:s.target.value}),onKeyPress:s=>{"Enter"===s.key&&p(e.id)},className:"flex-1 text-sm"}),(0,t.jsx)(m.z,{size:"sm",onClick:()=>p(e.id),disabled:!(null===(s=o[e.id])||void 0===s?void 0:s.trim()),style:{backgroundColor:"rgb(0, 8, 148)"},className:"text-white",children:"送信"})]})]})},e.id)})})}var U=a(8604),W=a(3146);function G(e){let{isOpen:s,onClose:a,onPostCreated:r}=e,[n,i]=(0,l.useState)(""),[c,o]=(0,l.useState)(""),[d,h]=(0,l.useState)([]),[u,g]=(0,l.useState)(!1),p=async()=>{if(!n.trim()){x.Am.error("投稿内容を入力してください");return}g(!0);try{let e=new FormData;e.append("content",n),c.trim()&&e.append("hashtags",c),d.forEach(s=>{e.append("images",s)}),await Z.x1.createPost({content:n,category:"general",hashtags:c.trim(),image:d[0]}),x.Am.success("投稿を作成しました"),r(),a(),i(""),o(""),h([])}catch(e){console.error("投稿作成エラー:",e),x.Am.error("投稿の作成に失敗しました")}finally{g(!1)}};return(0,t.jsx)(f.Vq,{open:s,onOpenChange:a,children:(0,t.jsxs)(f.cZ,{className:"sm:max-w-[600px]",children:[(0,t.jsxs)(f.fK,{children:[(0,t.jsx)(f.$N,{className:"text-lg font-heading",style:{color:"rgb(0, 8, 148)"},children:"新しい投稿を作成"}),(0,t.jsx)("button",{onClick:a,className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100",children:(0,t.jsx)(F.Z,{className:"h-4 w-4"})})]}),(0,t.jsxs)("div",{className:"space-y-4 mt-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(W.g,{placeholder:"今日のわんちゃんの様子を投稿してみましょう...",value:n,onChange:e=>i(e.target.value),className:"min-h-[120px] resize-none",maxLength:500}),(0,t.jsxs)("p",{className:"text-xs text-gray-500 mt-1 text-right",children:[n.length,"/500"]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,t.jsx)(M.Z,{className:"h-4 w-4",style:{color:"rgb(0, 8, 148)"}}),(0,t.jsx)("span",{className:"text-sm font-caption",children:"ハッシュタグ"})]}),(0,t.jsx)(j.I,{placeholder:"#柴犬 #ドッグラン #今治",value:c,onChange:e=>o(e.target.value),className:"text-sm"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,t.jsx)(U.Z,{className:"h-4 w-4",style:{color:"rgb(0, 8, 148)"}}),(0,t.jsx)("span",{className:"text-sm font-caption",children:"写真を追加（最大4枚）"})]}),(0,t.jsx)("input",{type:"file",accept:"image/*",multiple:!0,onChange:e=>{e.target.files&&h(Array.from(e.target.files).slice(0,4))},className:"hidden",id:"image-upload"}),(0,t.jsx)("label",{htmlFor:"image-upload",className:"flex items-center justify-center w-full h-32 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer hover:border-gray-400 transition-colors",children:d.length>0?(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:d.map((e,s)=>(0,t.jsx)("div",{className:"relative",children:(0,t.jsx)("img",{src:URL.createObjectURL(e),alt:"選択画像 ".concat(s+1),className:"w-20 h-20 object-cover rounded"})},s))}):(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(U.Z,{className:"mx-auto h-8 w-8 text-gray-400"}),(0,t.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:"クリックして画像を選択"})]})})]}),(0,t.jsxs)("div",{className:"flex justify-end space-x-2 pt-4",children:[(0,t.jsx)(m.z,{variant:"outline",onClick:a,disabled:u,children:"キャンセル"}),(0,t.jsx)(m.z,{onClick:p,disabled:u||!n.trim(),style:{backgroundColor:"rgb(0, 8, 148)"},className:"text-white",children:u?"投稿中...":"投稿する"})]})]})]})})}function X(e){let{userStatus:s,searchQuery:a,setSearchQuery:r,activeTag:n,setActiveTag:i,recentPosts:c,setRecentPosts:o,setShowCreatePostModal:d,setSelectedPostIdForComment:x,setShowCommentModal:h}=e,[u,p]=(0,l.useState)(!1),[f,j]=(0,l.useState)(0);return(c.filter(e=>{let s="all"===n||e.tag===n,t=""===a||e.content.toLowerCase().includes(a.toLowerCase())||e.user.toLowerCase().includes(a.toLowerCase())||e.dog.toLowerCase().includes(a.toLowerCase());return s&&t}),s!==y.J0.LoggedIn)?(0,t.jsx)("div",{className:"space-y-6 text-center",children:(0,t.jsx)(g.Zb,{className:"border-asics-blue-200",style:{backgroundColor:"rgba(0, 8, 148, 0.05)",borderColor:"rgba(0, 8, 148, 0.2)"},children:(0,t.jsxs)(g.aY,{className:"p-6",children:[(0,t.jsx)("h2",{className:"text-xl font-heading mb-4",style:{color:"rgb(0, 8, 148)"},children:"投稿機能はログイン後に利用可能です"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 font-caption",children:"みんなの投稿の閲覧や新規投稿は、ログインしてからご利用いただけます。"})]})})}):(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h2",{className:"text-lg font-heading",style:{color:"rgb(0, 8, 148)"},children:"みんなの投稿"}),(0,t.jsxs)(m.z,{size:"sm",className:"text-white",style:{backgroundColor:"rgb(0, 8, 148)"},onClick:()=>p(!0),children:[(0,t.jsx)(q.Z,{className:"h-4 w-4 mr-1"}),"投稿する"]})]}),(0,t.jsx)(H,{refreshKey:f}),(0,t.jsx)(G,{isOpen:u,onClose:()=>p(!1),onPostCreated:()=>{j(e=>e+1),p(!1)}})]})}var ee=a(9896),es=a(7905),ea=a(1568),et=a(6706);function el(e){let{isOpen:s,onClose:a}=e,[r,n]=(0,l.useState)(""),[i,c]=(0,l.useState)(!1),[d,h]=(0,l.useState)(null),[u,g]=(0,l.useState)(0);(0,l.useEffect)(()=>{s&&p()},[s]),(0,l.useEffect)(()=>{if(d){let e=setInterval(()=>{let s=new Date,a=d.getTime()-s.getTime();g(Math.max(0,Math.floor(a/1e3))),a<=0&&(clearInterval(e),x.Am.warning("QRコードの有効期限が切れました。再生成してください。"))},1e3);return()=>clearInterval(e)}},[d]);let p=async()=>{c(!0);try{let e=await Z.x1.generateQRCode();n(e.qr_code),h(new Date(e.expires_at))}catch(e){console.error("QRコード生成エラー:",e),x.Am.error("QRコードの生成に失敗しました")}finally{c(!1)}};return(0,t.jsx)(f.Vq,{open:s,onOpenChange:a,children:(0,t.jsxs)(f.cZ,{className:"sm:max-w-[400px]",children:[(0,t.jsxs)(f.fK,{children:[(0,t.jsxs)(f.$N,{className:"text-lg font-heading flex items-center",style:{color:"rgb(0, 8, 148)"},children:[(0,t.jsx)(o.Z,{className:"h-5 w-5 mr-2"}),"入場用QRコード"]}),(0,t.jsx)("button",{onClick:a,className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100",children:(0,t.jsx)(F.Z,{className:"h-4 w-4"})})]}),(0,t.jsx)("div",{className:"space-y-4 mt-4",children:i?(0,t.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2",style:{borderColor:"rgb(0, 8, 148)"}})}):r?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"flex justify-center",children:(0,t.jsx)("img",{src:r,alt:"QRコード",className:"w-64 h-64"})}),(0,t.jsxs)("div",{className:"text-center space-y-2",children:[(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"このQRコードを受付で提示してください"}),u>0?(0,t.jsxs)("p",{className:"text-sm font-medium ".concat(u<60?"text-red-500":"text-gray-700"),children:["有効期限: ","".concat(Math.floor(u/60),":").concat((u%60).toString().padStart(2,"0"))]}):(0,t.jsx)("p",{className:"text-sm text-red-500 font-medium",children:"有効期限切れ"})]}),(0,t.jsxs)(m.z,{onClick:p,variant:"outline",className:"w-full",disabled:i,children:[(0,t.jsx)(et.Z,{className:"h-4 w-4 mr-2"}),"QRコードを再生成"]})]}):(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)("p",{className:"text-gray-500",children:"QRコードを生成できませんでした"}),(0,t.jsx)(m.z,{onClick:p,className:"mt-4",style:{backgroundColor:"rgb(0, 8, 148)"},children:"再試行"})]})})]})})}function er(e){let{userDogs:s}=e,[a,r]=(0,l.useState)(!1),[n,i]=(0,l.useState)([]),[c,h]=(0,l.useState)(),[u,f]=(0,l.useState)([]),[j,b]=(0,l.useState)(!1),[N,y]=(0,l.useState)(!1),[v,w]=(0,l.useState)(!1);(0,l.useEffect)(()=>{C(),k()},[]);let C=async()=>{try{let e=await Z.x1.getCurrentVisitors();h(e);let s=await Z.x1.getEntryHistory(1);s.length>0&&"entry"===s[0].action&&r(!0)}catch(e){console.error("状態取得エラー:",e)}},k=async()=>{try{let e=await Z.x1.getEntryHistory(10);f(e)}catch(e){console.error("履歴取得エラー:",e)}},S=async()=>{if(0===n.length){x.Am.error("入場させる犬を選択してください");return}y(!0);try{await Z.x1.enterDogRun(n),x.Am.success("入場処理が完了しました"),r(!0),i([]),await C(),await k()}catch(a){var e,s;console.error("入場エラー:",a),x.Am.error((null===(s=a.response)||void 0===s?void 0:null===(e=s.data)||void 0===e?void 0:e.detail)||"入場処理に失敗しました")}finally{y(!1)}},D=async()=>{y(!0);try{let e=await Z.x1.exitDogRun();x.Am.success("退場しました（滞在時間: ".concat(e.duration_minutes,"分）")),r(!1),await C(),await k()}catch(a){var e,s;console.error("退場エラー:",a),x.Am.error((null===(s=a.response)||void 0===s?void 0:null===(e=s.data)||void 0===e?void 0:e.detail)||"退場処理に失敗しました")}finally{y(!1)}},z=e=>{i(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(g.Zb,{className:"border-asics-blue-100",children:[(0,t.jsx)(g.Ol,{children:(0,t.jsxs)(g.ll,{className:"text-lg font-heading flex items-center justify-between",style:{color:"rgb(0, 8, 148)"},children:[(0,t.jsxs)("span",{className:"flex items-center",children:[a?(0,t.jsx)(ee.Z,{className:"h-5 w-5 mr-2"}):(0,t.jsx)(es.Z,{className:"h-5 w-5 mr-2"}),a?"現在入場中":"入場受付"]}),a&&(0,t.jsx)(p.C,{className:"bg-green-500 text-white",children:"IN PARK"})]})}),(0,t.jsx)(g.aY,{className:"space-y-4",children:a?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"text-center py-4",children:[(0,t.jsx)("p",{className:"text-lg mb-2",children:"ドッグランをお楽しみください！"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"退場時は下のボタンを押してください"})]}),(0,t.jsx)(m.z,{onClick:D,disabled:N,className:"w-full text-white bg-red-500 hover:bg-red-600",children:N?"処理中...":"退場する"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(m.z,{onClick:()=>b(!0),variant:"outline",className:"w-full",children:[(0,t.jsx)(o.Z,{className:"h-4 w-4 mr-2"}),"QRコードを表示"]}),(0,t.jsx)(A.Z,{}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium mb-3",children:"入場する犬を選択"}),s.length>0?(0,t.jsx)("div",{className:"space-y-2",children:s.map(e=>(0,t.jsxs)("div",{className:"flex items-center space-x-3 p-2 rounded hover:bg-gray-50",children:[(0,t.jsx)(J,{checked:n.includes(e.id),onCheckedChange:()=>z(e.id),disabled:N}),(0,t.jsx)(L.Z,{className:"h-4 w-4 text-gray-500"}),(0,t.jsx)("span",{className:"text-sm",children:e.name}),e.breed&&(0,t.jsxs)("span",{className:"text-xs text-gray-500",children:["(",e.breed,")"]})]},e.id))}):(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"登録された犬がいません"})]}),(0,t.jsx)(m.z,{onClick:S,disabled:0===n.length||N,className:"w-full text-white",style:{backgroundColor:"rgb(0, 8, 148)"},children:N?"処理中...":"入場する"})]})})]}),c&&(0,t.jsxs)(g.Zb,{className:"border-asics-blue-100",children:[(0,t.jsx)(g.Ol,{children:(0,t.jsxs)(g.ll,{className:"text-base font-heading flex items-center",style:{color:"rgb(0, 8, 148)"},children:[(0,t.jsx)(d.Z,{className:"h-5 w-5 mr-2"}),"現在の在場者"]})}),(0,t.jsxs)(g.aY,{children:[(0,t.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(d.Z,{className:"h-4 w-4 mr-1 text-gray-500"}),(0,t.jsxs)("span",{className:"text-sm font-medium",children:[c.total_visitors,"名"]})]}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(L.Z,{className:"h-4 w-4 mr-1 text-gray-500"}),(0,t.jsxs)("span",{className:"text-sm font-medium",children:[c.total_dogs,"頭"]})]})]})}),c.visitors.length>0?(0,t.jsx)("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:c.visitors.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm py-1",children:[(0,t.jsx)("span",{children:e.user_name}),(0,t.jsxs)("span",{className:"text-xs text-gray-500",children:[(0,_.WU)(new Date(e.entry_time),"HH:mm",{locale:I.ja}),"〜"]})]},e.entry_id))}):(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"現在利用者はいません"})]})]}),(0,t.jsxs)(g.Zb,{className:"border-asics-blue-100",children:[(0,t.jsx)(g.Ol,{children:(0,t.jsxs)(g.ll,{className:"text-base font-heading flex items-center justify-between cursor-pointer",style:{color:"rgb(0, 8, 148)"},onClick:()=>w(!v),children:[(0,t.jsxs)("span",{className:"flex items-center",children:[(0,t.jsx)(ea.Z,{className:"h-5 w-5 mr-2"}),"利用履歴"]}),(0,t.jsx)("span",{className:"text-xs",children:v?"▲":"▼"})]})}),v&&(0,t.jsx)(g.aY,{children:u.length>0?(0,t.jsx)("div",{className:"space-y-2",children:u.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm py-2 border-b",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:["entry"===e.action?(0,t.jsx)(es.Z,{className:"h-4 w-4 text-green-500"}):(0,t.jsx)(ee.Z,{className:"h-4 w-4 text-red-500"}),(0,t.jsx)("span",{children:"entry"===e.action?"入場":"退場"})]}),(0,t.jsx)("span",{className:"text-xs text-gray-500",children:(0,_.WU)(new Date(e.occurred_at),"MM/dd HH:mm",{locale:I.ja})})]},e.id))}):(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"利用履歴はありません"})})]}),(0,t.jsx)(el,{isOpen:j,onClose:()=>b(!1)})]})}function en(e){let{userStatus:s,entryStep:a,setEntryStep:r,loggedInUserDogs:n,selectedDogsForEntry:i,setSelectedDogsForEntry:c,isInDogRun:o,setIsInDogRun:d}=e,[m,x]=(0,l.useState)([]);(0,l.useEffect)(()=>{s===y.J0.LoggedIn&&h()},[s]);let h=async()=>{try{let e=await Z.x1.getUserDogs();x(e)}catch(e){console.error("犬情報取得エラー:",e)}};return s!==y.J0.LoggedIn?(0,t.jsx)("div",{className:"space-y-6 text-center",children:(0,t.jsx)(g.Zb,{className:"border-asics-blue-200",style:{backgroundColor:"rgba(0, 8, 148, 0.05)",borderColor:"rgba(0, 8, 148, 0.2)"},children:(0,t.jsxs)(g.aY,{className:"p-6",children:[(0,t.jsx)("h2",{className:"text-xl font-heading mb-4",style:{color:"rgb(0, 8, 148)"},children:"入場機能はログイン後に利用可能です"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 font-caption",children:"QRコードスキャンによる入場は、ログインしてからご利用いただけます。"})]})})}):(0,t.jsx)("div",{className:"space-y-6",children:(0,t.jsx)(er,{userDogs:m})})}var ei=a(3274);function ec(e){let{userStatus:s,loggedInUserDogs:a,setLoggedInUserDogs:r,setShowAddDogModal:n,handleEditDog:i,handleLogout:c,ownerProfile:o,setOwnerProfile:h,setShowEditOwnerModal:u}=e,[f,j]=(0,l.useState)(!1),[b,N]=(0,l.useState)(null);(0,l.useEffect)(()=>{s===y.J0.LoggedIn&&v()},[s]);let v=async()=>{j(!0);try{let e=await Z.x1.getUserProfile();if(N(e),e.dogs){let s=e.dogs.map(e=>({id:e.id,name:e.name,breed:e.breed||"不明",weight:e.weight||"",personality:e.personality?e.personality.split(","):[],lastVaccinationDate:e.lastVaccinationDate||new Date().toISOString(),avatar:""}));r(s)}e&&h({...o,fullName:"".concat(e.last_name||""," ").concat(e.first_name||"").trim()||"ユーザー",email:e.email,phoneNumber:e.phone_number||"",address:e.address||""})}catch(e){console.error("プロフィール取得エラー:",e),x.Am.error("プロフィール情報の取得に失敗しました")}finally{j(!1)}};return s!==y.J0.LoggedIn?(0,t.jsx)("div",{className:"space-y-6 text-center",children:(0,t.jsx)(g.Zb,{className:"border-asics-blue-200",style:{backgroundColor:"rgba(0, 8, 148, 0.05)",borderColor:"rgba(0, 8, 148, 0.2)"},children:(0,t.jsxs)(g.aY,{className:"p-6",children:[(0,t.jsx)("h2",{className:"text-xl font-heading mb-4",style:{color:"rgb(0, 8, 148)"},children:"マイページはログイン後に利用可能です"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 font-caption",children:"プロフィールや利用統計は、ログインしてからご利用いただけます。"})]})})}):f?(0,t.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,t.jsx)(ei.Z,{className:"h-8 w-8 animate-spin text-gray-500"})}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(g.Zb,{className:"border-asics-blue-100",children:[(0,t.jsx)(g.Ol,{children:(0,t.jsxs)(g.ll,{className:"text-base flex items-center font-heading",style:{color:"rgb(0, 8, 148)"},children:[(0,t.jsx)(d.Z,{className:"h-5 w-5 mr-2"}),"飼い主プロフィール"]})}),(0,t.jsx)(g.aY,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)(Q,{className:"w-16 h-16",children:(0,t.jsx)(K,{className:"text-lg font-heading",style:{backgroundColor:"rgba(0, 8, 148, 0.1)",color:"rgb(0, 8, 148)"},children:"田"})}),(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"font-heading",style:{color:"rgb(0, 8, 148)"},children:o.fullName}),(0,t.jsx)("p",{className:"text-sm text-gray-500 font-caption",children:"里山ドッグラン会員"}),(0,t.jsxs)("p",{className:"text-xs text-gray-400 font-caption",children:["会員歴: ",o.memberSince]})]}),(0,t.jsx)(m.z,{variant:"outline",size:"sm",className:"bg-transparent border-asics-blue-200",style:{color:"rgb(0, 8, 148)"},onClick:()=>u(!0),children:"編集"})]})})]})})]}),(0,t.jsxs)(g.Zb,{className:"border-asics-blue-100",children:[(0,t.jsx)(g.Ol,{children:(0,t.jsxs)(g.ll,{className:"text-base flex items-center font-heading",style:{color:"rgb(0, 8, 148)"},children:[(0,t.jsx)(L.Z,{className:"h-5 w-5 mr-2"}),"愛犬プロフィール"]})}),(0,t.jsxs)(g.aY,{className:"space-y-4",children:[a.map(e=>(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)("div",{className:"w-16 h-16 rounded-full flex items-center justify-center",style:{backgroundColor:"rgba(255, 235, 0, 0.2)"},children:(0,t.jsx)(L.Z,{className:"h-8 w-8",style:{color:"rgb(0, 8, 148)"}})}),(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-heading",style:{color:"rgb(0, 8, 148)"},children:e.name}),(0,t.jsxs)("p",{className:"text-sm text-gray-500 font-caption",children:[e.breed," • ",e.weight,e.lastVaccinationDate&&(0,S.DS)(e.lastVaccinationDate)&&(0,t.jsx)("span",{className:"ml-2 text-green-600",children:" (ワクチン済)"})]}),(0,t.jsx)("div",{className:"flex space-x-1 mt-1",children:e.personality&&e.personality.map((e,s)=>(0,t.jsx)(p.C,{variant:"outline",className:"text-xs border-asics-blue-200 font-caption",style:{color:"rgb(0, 8, 148)"},children:e},s))})]}),(0,t.jsx)(m.z,{variant:"outline",size:"sm",className:"bg-transparent border-asics-blue-200",style:{color:"rgb(0, 8, 148)"},onClick:()=>i(e.id),children:"編集"})]})})]},e.id)),(0,t.jsx)(m.z,{variant:"outline",size:"sm",className:"w-full bg-transparent border-asics-blue-200",style:{color:"rgb(0, 8, 148)"},onClick:()=>n(!0),children:"新しい愛犬を登録する"}),(0,t.jsx)("p",{className:"text-xs text-gray-500 font-caption mt-2",children:"ワクチン接種日から1年が経過すると自動で登録が解除されます。"})]})]}),(0,t.jsxs)(g.Zb,{className:"border-asics-blue-100",children:[(0,t.jsx)(g.Ol,{children:(0,t.jsx)(g.ll,{className:"text-base font-heading",style:{color:"rgb(0, 8, 148)"},children:"利用統計"})}),(0,t.jsxs)(g.aY,{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-sm font-caption",children:"今月の利用回数"}),(0,t.jsx)("span",{className:"font-heading",style:{color:"rgb(0, 8, 148)"},children:"12回"})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-sm font-caption",children:"投稿数"}),(0,t.jsx)("span",{className:"font-heading",style:{color:"rgb(0, 8, 148)"},children:"24件"})]})]})]}),(0,t.jsxs)(m.z,{onClick:c,className:"w-full text-white",style:{backgroundColor:"rgb(0, 8, 148)"},children:[(0,t.jsx)(ee.Z,{className:"h-4 w-4 mr-2"}),"ログアウト"]})]})}var eo=a(6127);function ed(e){let{showNoticesModal:s,setShowNoticesModal:a,notices:l,setNotices:r}=e;return(0,t.jsx)(f.Vq,{open:s,onOpenChange:e=>{a(e),e&&r(l.map(e=>({...e,read:!0})))},children:(0,t.jsxs)(f.cZ,{className:"sm:max-w-[425px] max-h-[80vh] overflow-y-auto",children:[(0,t.jsxs)(f.fK,{children:[(0,t.jsx)(f.$N,{className:"font-heading",children:"お知らせ一覧"}),(0,t.jsxs)(m.z,{variant:"ghost",size:"icon",className:"absolute right-4 top-4",onClick:()=>a(!1),children:[(0,t.jsx)(F.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]}),(0,t.jsx)("div",{className:"space-y-4",children:l.map(e=>(0,t.jsx)(g.Zb,{className:"border-asics-blue-100 ".concat(e.read?"":"bg-blue-50"),children:(0,t.jsx)(g.aY,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,t.jsx)(eo.Z,{className:"h-5 w-5 mt-0.5",style:{color:"rgb(255, 235, 0)"}}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h3",{className:"font-heading text-sm",style:{color:"rgb(0, 8, 148)"},children:e.title}),(0,t.jsx)("p",{className:"text-xs text-gray-500 font-caption mt-1",children:new Date(e.date).toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric"})}),(0,t.jsx)("p",{className:"text-sm mt-1 font-caption",style:{color:"rgb(0, 8, 148)"},children:e.content})]})]})})},e.id))})]})})}let em=[{id:1,name:"ポチ",breed:"柴犬",weight:"8kg",owner:"田中さん",time:"30分前から",personality:["人懐っこい","活発"],lastVaccinationDate:"2025-01-15"},{id:2,name:"ハナ",breed:"ボーダーコリー",weight:"18kg",owner:"佐藤さん",time:"1時間前から",personality:["遊び好き","賢い"],lastVaccinationDate:"2023-03-20"},{id:3,name:"チョコ",breed:"トイプードル",weight:"3kg",owner:"山田さん",time:"15分前から",personality:["おとなしい","甘えん坊"],lastVaccinationDate:"2024-06-01"}],ex=[{id:1,user:"田中さん",dog:"ポチ",content:"今日は元気いっぱいでした！ #里山ドッグラン #ポチ",image:!0,likes:5,comments:2,time:"1時間前",tag:"satoyama-dogrun",isLiked:!1,commentsList:[{id:1,user:"佐藤さん",text:"ポチちゃん可愛いですね！"},{id:2,user:"山田さん",text:"楽しそうで何よりです！"}]},{id:2,user:"佐藤さん",dog:"ハナ",content:"新しいおもちゃがお気に入りです #お気に入り #ハナ",image:!0,likes:8,comments:3,time:"3時間前",tag:"toys",isLiked:!1,commentsList:[{id:1,user:"田中さん",text:"どこのおもちゃですか？うちの子も喜びそうです！"},{id:2,user:"鈴木さん",text:"ハナちゃん、夢中ですね！"},{id:3,user:"高橋さん",text:"可愛い！"}]},{id:3,user:"山田さん",dog:"チョコ",content:"お友達と仲良く遊んでいます #友達と遊ぶ #チョコ",image:!1,likes:6,comments:1,time:"5時間前",tag:"daily-life",isLiked:!1,commentsList:[{id:1,user:"田中さん",text:"チョコちゃん、社交的ですね！"}]}],eh=[{id:1,title:"芝生メンテナンスのお知らせ",content:"3月28日(木) 10:00-12:00 芝生メンテナンスのため一部エリア利用不可",date:"2025-03-28",read:!1},{id:2,title:"春のイベント開催！",content:"4月10日に春のドッグランフェスティバルを開催します！詳細はイベントタブをご確認ください。",date:"2025-04-01",read:!1},{id:3,title:"GW期間中の営業時間について",content:"ゴールデンウィーク期間中（5月3日〜5月6日）は、特別営業時間となります。詳細はカレンダーをご確認ください。",date:"2025-04-20",read:!0}],eu=[{id:"all",label:"すべて"},{id:"satoyama-dogrun",label:"里山ドッグラン"},{id:"dog-food",label:"ドッグフード"},{id:"vet-clinic",label:"動物病院"},{id:"training",label:"しつけ"},{id:"walks",label:"お散歩"},{id:"events",label:"イベント"},{id:"grooming",label:"お手入れ"},{id:"toys",label:"おもちゃ"},{id:"daily-life",label:"日常の一コマ"},{id:"trouble-consultation",label:"悩み相談"},{id:"other",label:"その他"}];function eg(e){let{showCreatePostModal:s,setShowCreatePostModal:a,newPostCategory:l,setNewPostCategory:r,newPostContent:n,setNewPostContent:i,newPostHashtags:c,setNewPostHashtags:o,newPostImageFile:d,setNewPostImageFile:x,handleNewPostSubmit:h}=e;return(0,t.jsx)(f.Vq,{open:s,onOpenChange:a,children:(0,t.jsxs)(f.cZ,{className:"sm:max-w-[425px] max-h-[80vh] overflow-y-auto",children:[(0,t.jsxs)(f.fK,{children:[(0,t.jsx)(f.$N,{className:"font-heading",children:"新しい投稿を作成"}),(0,t.jsxs)(m.z,{variant:"ghost",size:"icon",className:"absolute right-4 top-4",onClick:()=>a(!1),children:[(0,t.jsx)(F.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]}),(0,t.jsxs)("form",{onSubmit:h,className:"space-y-4 py-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(b._,{htmlFor:"postCategory",className:"font-caption",children:["カテゴリー ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)(N.Ph,{onValueChange:r,value:l,required:!0,children:[(0,t.jsx)(N.i4,{id:"postCategory",className:"w-full mt-1",children:(0,t.jsx)(N.ki,{placeholder:"カテゴリーを選択"})}),(0,t.jsx)(N.Bw,{children:eu.filter(e=>"all"!==e.id).map(e=>(0,t.jsx)(N.Ql,{value:e.id,children:e.label},e.id))})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)(b._,{htmlFor:"postContent",className:"font-caption",children:["投稿内容 ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)(W.g,{id:"postContent",placeholder:"今日のドッグランでの出来事をシェアしましょう！",value:n,onChange:e=>i(e.target.value),className:"mt-1 min-h-[100px]",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(b._,{htmlFor:"postHashtags",className:"font-caption",children:"ハッシュタグ (任意)"}),(0,t.jsx)(j.I,{id:"postHashtags",placeholder:"#里山ドッグラン #ポチ",value:c,onChange:e=>o(e.target.value),className:"mt-1"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(b._,{htmlFor:"postImage",className:"font-caption",children:"画像の追加 (任意)"}),(0,t.jsx)(j.I,{id:"postImage",type:"file",accept:"image/*",onChange:e=>x(e.target.files?e.target.files[0]:null),className:"mt-1"}),d&&(0,t.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["選択中のファイル: ",d.name]})]}),(0,t.jsx)(f.cN,{children:(0,t.jsx)(m.z,{type:"submit",className:"w-full text-white",style:{backgroundColor:"rgb(0, 8, 148)"},children:"投稿する"})})]})]})})}function ep(e){let{showCommentModal:s,setShowCommentModal:a,selectedPostIdForComment:l,setSelectedPostIdForComment:r,newCommentText:n,setNewCommentText:i,recentPosts:c,setRecentPosts:o,handleAddComment:d}=e,x=c.find(e=>e.id===l);return x?(0,t.jsx)(f.Vq,{open:s,onOpenChange:a,children:(0,t.jsxs)(f.cZ,{className:"sm:max-w-[425px] max-h-[80vh] overflow-y-auto",children:[(0,t.jsxs)(f.fK,{children:[(0,t.jsx)(f.$N,{className:"font-heading",children:"コメント"}),(0,t.jsxs)(m.z,{variant:"ghost",size:"icon",className:"absolute right-4 top-4",onClick:()=>{a(!1),r(null),i("")},children:[(0,t.jsx)(F.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]}),(0,t.jsxs)("div",{className:"space-y-4 py-4",children:[x.commentsList.length>0?(0,t.jsx)("div",{className:"space-y-3",children:x.commentsList.map(e=>(0,t.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,t.jsx)(Q,{className:"w-8 h-8",children:(0,t.jsx)(K,{style:{backgroundColor:"rgba(0, 8, 148, 0.05)",color:"rgb(0, 8, 148)"},children:e.user[0]})}),(0,t.jsxs)("div",{className:"flex-1 bg-gray-100 p-2 rounded-lg",children:[(0,t.jsx)("p",{className:"font-heading text-sm",style:{color:"rgb(0, 8, 148)"},children:e.user}),(0,t.jsx)("p",{className:"text-sm font-caption text-gray-700",children:e.text})]})]},e.id))}):(0,t.jsx)("p",{className:"text-center text-gray-500 font-caption",children:"まだコメントはありません。"}),(0,t.jsxs)("form",{onSubmit:d,className:"flex items-center space-x-2 pt-4 border-t",children:[(0,t.jsx)(j.I,{placeholder:"コメントを入力...",value:n,onChange:e=>i(e.target.value),className:"flex-1",required:!0}),(0,t.jsx)(m.z,{type:"submit",size:"sm",style:{backgroundColor:"rgb(0, 8, 148)"},children:"コメントする"})]})]})]})}):null}let ef=["トイ・プードル","チワワ","ミニチュア・ダックスフンド","ポメラニアン","マルチーズ","シーズー","パピヨン","ヨークシャー・テリア","ペキニーズ","ジャック・ラッセル・テリア","ビション・フリーゼ","フレンチ・ブルドッグ","柴犬","コーギー","キャバリア・キング・チャールズ・スパニエル","シェットランド・シープドッグ","ビーグル","ボストン・テリア","アメリカン・コッカー・スパニエル","ゴールデン・レトリーバー","ラブラドール・レトリーバー","シベリアン・ハスキー","バーニーズ・マウンテン・ドッグ","ボーダー・コリー","ドーベルマン","グレート・ピレニーズ","ジャーマン・シェパード・ドッグ","秋田犬","その他"];function ej(e){let{showAddDogModal:s,setShowAddDogModal:a,newDogRegistrationStatus:l,setNewDogRegistrationStatus:r,newDogName:n,setNewDogName:i,newDogBreed:c,setNewDogBreed:o,newDogWeight:d,setNewDogWeight:x,newDogPersonality:h,setNewDogPersonality:u,newDogLastVaccinationDate:g,setNewDogLastVaccinationDate:p,newDogVaccinationCertificateFile:v,setNewDogVaccinationCertificateFile:w,setLoggedInUserDogs:C,handleAddDogRegistrationSubmit:k,handleApproveNewDog:S}=e;return(0,t.jsx)(f.Vq,{open:s,onOpenChange:a,children:(0,t.jsxs)(f.cZ,{className:"sm:max-w-[425px] max-h-[80vh] overflow-y-auto",children:[(0,t.jsxs)(f.fK,{children:[(0,t.jsx)(f.$N,{className:"font-heading",children:"新しい愛犬の登録申請"}),(0,t.jsxs)(m.z,{variant:"ghost",size:"icon",className:"absolute right-4 top-4",onClick:()=>{a(!1),r(y.YN.Initial),i(""),o(""),x(""),u([]),p(""),w(null)},children:[(0,t.jsx)(F.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]}),l===y.YN.Initial&&(0,t.jsxs)("form",{onSubmit:k,className:"space-y-4 py-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(b._,{htmlFor:"newDogName",className:"font-caption",children:["愛犬のお名前 ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)(j.I,{id:"newDogName",value:n,onChange:e=>i(e.target.value),required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)(b._,{htmlFor:"newDogBreed",className:"font-caption",children:["犬種 ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)(N.Ph,{onValueChange:o,value:c,required:!0,children:[(0,t.jsx)(N.i4,{children:(0,t.jsx)(N.ki,{placeholder:"犬種を選ぶ"})}),(0,t.jsx)(N.Bw,{children:ef.map(e=>(0,t.jsx)(N.Ql,{value:e,children:e},e))})]}),"その他"===c&&(0,t.jsx)(j.I,{id:"otherDogBreed",placeholder:"犬種を入力してください",value:"その他"===c?"":c,onChange:e=>o(e.target.value),className:"mt-2",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)(b._,{htmlFor:"newDogWeight",className:"font-caption",children:["体重 (kg) ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)(j.I,{id:"newDogWeight",type:"number",step:"0.1",value:d,onChange:e=>x(e.target.value),required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(b._,{htmlFor:"newDogPersonality",className:"font-caption",children:"性格 (カンマ区切りで複数入力可)"}),(0,t.jsx)(j.I,{id:"newDogPersonality",placeholder:"例: 人懐っこい, 活発",value:h.join(", "),onChange:e=>u(e.target.value.split(",").map(e=>e.trim()).filter(Boolean)),className:"mt-1"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(b._,{htmlFor:"newDogVaccinationDate",className:"font-caption",children:"最終ワクチン接種日"}),(0,t.jsx)(j.I,{id:"newDogVaccinationDate",type:"date",value:g,onChange:e=>p(e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)(b._,{htmlFor:"newDogVaccinationCertificate",className:"block text-sm font-caption font-medium text-gray-700",children:["ワクチン接種証明書 (ファイル添付) ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)(j.I,{type:"file",id:"newDogVaccinationCertificate",accept:".pdf,.jpg,.jpeg,.png",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",onChange:e=>w(e.target.files?e.target.files[0]:null),required:!0}),v&&(0,t.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["選択中のファイル: ",v.name]})]}),(0,t.jsx)(f.cN,{children:(0,t.jsx)(m.z,{type:"submit",className:"w-full text-white",style:{backgroundColor:"rgb(0, 8, 148)"},children:"申請を送信する"})})]}),l===y.YN.Pending&&(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)("h3",{className:"text-xl font-heading mb-4",style:{color:"rgb(0, 8, 148)"},children:"愛犬の登録申請を審査中"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 font-caption mb-6",children:"新しい愛犬の登録申請を審査中です。承認までしばらくお待ちください。"}),(0,t.jsx)(m.z,{onClick:S,className:"w-full text-white",style:{backgroundColor:"rgb(0, 8, 148)"},children:"承認する (デモ用)"})]}),l===y.YN.Approved&&(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)("h3",{className:"text-xl font-heading mb-4",style:{color:"rgb(0, 8, 148)"},children:"愛犬の登録が完了しました！"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 font-caption mb-6",children:"新しい愛犬のプロフィールがマイページに追加されました。"}),(0,t.jsx)(m.z,{onClick:()=>{a(!1),r(y.YN.Initial),i(""),o(""),x(""),u([]),p(""),w(null)},className:"w-full text-white",style:{backgroundColor:"rgb(0, 8, 148)"},children:"閉じる"})]})]})})}function eb(e){let{editingDogId:s,setEditingDogId:a,editedDogName:l,setEditedDogName:r,editedDogBreed:n,setEditedDogBreed:i,editedDogWeight:c,setEditedDogWeight:o,editedDogPersonality:d,setEditedDogPersonality:x,loggedInUserDogs:h,setLoggedInUserDogs:u,handleSaveDogEdit:g,handleCancelDogEdit:p}=e;return h.find(e=>e.id===s)?(0,t.jsx)(f.Vq,{open:null!==s,onOpenChange:p,children:(0,t.jsxs)(f.cZ,{className:"sm:max-w-[425px] max-h-[80vh] overflow-y-auto",children:[(0,t.jsxs)(f.fK,{children:[(0,t.jsx)(f.$N,{className:"font-heading",children:"愛犬情報を編集"}),(0,t.jsxs)(m.z,{variant:"ghost",size:"icon",className:"absolute right-4 top-4",onClick:p,children:[(0,t.jsx)(F.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]}),(0,t.jsxs)("form",{onSubmit:g,className:"space-y-4 py-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(b._,{htmlFor:"editDogName",className:"font-caption",children:"愛犬のお名前"}),(0,t.jsx)(j.I,{id:"editDogName",value:l,onChange:e=>r(e.target.value),required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(b._,{htmlFor:"editDogBreed",className:"font-caption",children:"犬種"}),(0,t.jsx)(j.I,{id:"editDogBreed",value:n,onChange:e=>i(e.target.value),required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(b._,{htmlFor:"editDogWeight",className:"font-caption",children:"体重 (kg)"}),(0,t.jsx)(j.I,{id:"editDogWeight",type:"number",step:"0.1",value:c,onChange:e=>o(e.target.value),required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(b._,{htmlFor:"editDogPersonality",className:"font-caption",children:"性格 (カンマ区切りで複数入力可)"}),(0,t.jsx)(j.I,{id:"editDogPersonality",placeholder:"例: 人懐っこい, 活発",value:d.join(", "),onChange:e=>x(e.target.value.split(",").map(e=>e.trim()).filter(Boolean)),className:"mt-1"})]}),(0,t.jsxs)(f.cN,{children:[(0,t.jsx)(m.z,{type:"submit",className:"w-full text-white",style:{backgroundColor:"rgb(0, 8, 148)"},children:"保存する"}),(0,t.jsx)(m.z,{type:"button",variant:"outline",onClick:p,className:"w-full bg-transparent border-asics-blue-200",style:{color:"rgb(0, 8, 148)"},children:"キャンセル"})]})]})]})}):null}function eN(e){let{showEditOwnerModal:s,setShowEditOwnerModal:a,ownerProfile:l,setOwnerProfile:r}=e;return(0,t.jsx)(f.Vq,{open:s,onOpenChange:a,children:(0,t.jsxs)(f.cZ,{className:"sm:max-w-[425px] max-h-[80vh] overflow-y-auto",children:[(0,t.jsxs)(f.fK,{children:[(0,t.jsx)(f.$N,{className:"font-heading",children:"飼い主プロフィールを編集"}),(0,t.jsxs)(m.z,{variant:"ghost",size:"icon",className:"absolute right-4 top-4",onClick:()=>a(!1),children:[(0,t.jsx)(F.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]}),(0,t.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,t.jsx)(b._,{htmlFor:"address",className:"text-right font-caption",children:"住所"}),(0,t.jsx)(j.I,{id:"address",value:l.address,onChange:e=>r({...l,address:e.target.value}),className:"col-span-3 font-caption"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,t.jsx)(b._,{htmlFor:"imabariResidency",className:"text-right font-caption",children:"今治市内の居住歴"}),(0,t.jsxs)(N.Ph,{onValueChange:e=>r({...l,imabariResidency:e}),value:l.imabariResidency,children:[(0,t.jsx)(N.i4,{id:"imabariResidency",className:"col-span-3 [&>svg]:!hidden justify-start",children:(0,t.jsx)(N.ki,{placeholder:"選択してください",className:"text-left"})}),(0,t.jsxs)(N.Bw,{children:[(0,t.jsx)(N.Ql,{value:y.C$.LessThan1Year,children:"1年未満"}),(0,t.jsx)(N.Ql,{value:y.C$.OneToThreeYears,children:"1年以上3年未満"}),(0,t.jsx)(N.Ql,{value:y.C$.ThreeToFiveYears,children:"3年以上5年未満"}),(0,t.jsx)(N.Ql,{value:y.C$.MoreThan5Years,children:"5年以上"}),(0,t.jsx)(N.Ql,{value:y.C$.NotInImabari,children:"今治市内には住んでいない"})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,t.jsx)(b._,{htmlFor:"fullName",className:"text-right font-caption",children:"お名前"}),(0,t.jsx)(j.I,{id:"fullName",value:l.fullName,onChange:e=>r({...l,fullName:e.target.value}),className:"col-span-3 font-caption"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,t.jsx)(b._,{htmlFor:"email",className:"text-right font-caption",children:"Email"}),(0,t.jsx)(j.I,{id:"email",type:"email",value:l.email,onChange:e=>r({...l,email:e.target.value}),className:"col-span-3 font-caption"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,t.jsx)(b._,{htmlFor:"phoneNumber",className:"text-right font-caption",children:"携帯電話"}),(0,t.jsx)(j.I,{id:"phoneNumber",type:"tel",value:l.phoneNumber,onChange:e=>r({...l,phoneNumber:e.target.value}),className:"col-span-3 font-caption"})]})]}),(0,t.jsx)(m.z,{onClick:()=>{console.log("Owner profile saved:",l),a(!1)},className:"w-full text-white",style:{backgroundColor:"rgb(0, 8, 148)"},children:"保存"})]})})}var ey=a(2940),ev=a(1935),ew=a(6780);function eC(e){let{isOpen:s,onClose:a,applicationId:r}=e,[n,i]=(0,l.useState)(null),[c,o]=(0,l.useState)(!1);(0,l.useEffect)(()=>{s&&r&&d()},[s,r]);let d=async()=>{if(!r){x.Am.error("申請IDが見つかりません");return}o(!0);try{let e=await Z.x1.getApplicationStatus(r);i(e)}catch(e){console.error("申請状況取得エラー:",e),x.Am.error("申請状況の取得に失敗しました")}finally{o(!1)}},h=e=>new Date(e).toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return(0,t.jsx)(f.Vq,{open:s,onOpenChange:a,children:(0,t.jsxs)(f.cZ,{className:"sm:max-w-[500px]",children:[(0,t.jsxs)(f.fK,{children:[(0,t.jsx)(f.$N,{children:"申請状況確認"}),(0,t.jsx)(f.Be,{children:"利用申請の審査状況を確認できます"})]}),c?(0,t.jsx)("div",{className:"flex justify-center py-8",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}):n?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)(g.Zb,{children:[(0,t.jsx)(g.Ol,{className:"pb-3",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(g.ll,{className:"text-lg",children:"申請ID"}),(()=>{if(!n)return null;switch(n.status){case"pending":return(0,t.jsx)(p.C,{variant:"secondary",className:"bg-yellow-100 text-yellow-800",children:"審査中"});case"approved":return(0,t.jsx)(p.C,{variant:"secondary",className:"bg-green-100 text-green-800",children:"承認済み"});case"rejected":return(0,t.jsx)(p.C,{variant:"secondary",className:"bg-red-100 text-red-800",children:"却下"});default:return(0,t.jsx)(p.C,{variant:"secondary",children:"不明"})}})()]})}),(0,t.jsx)(g.aY,{children:(0,t.jsx)("p",{className:"text-sm text-muted-foreground font-mono",children:n.application_id})})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-4 p-4 bg-gray-50 rounded-lg",children:[(()=>{if(!n)return null;switch(n.status){case"pending":return(0,t.jsx)(u.Z,{className:"h-8 w-8 text-yellow-500"});case"approved":return(0,t.jsx)(ey.Z,{className:"h-8 w-8 text-green-500"});case"rejected":return(0,t.jsx)(ev.Z,{className:"h-8 w-8 text-red-500"});default:return(0,t.jsx)(ew.Z,{className:"h-8 w-8 text-gray-500"})}})(),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("h3",{className:"font-semibold text-lg mb-1",children:["pending"===n.status&&"審査中","approved"===n.status&&"承認されました","rejected"===n.status&&"却下されました"]}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:(()=>{if(!n)return"";switch(n.status){case"pending":return"申請を審査中です。管理者の承認をお待ちください。";case"approved":return"申請が承認されました！ログインしてご利用ください。";case"rejected":return"申請が却下されました。理由をご確認ください。";default:return""}})()})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"申請日時:"}),(0,t.jsx)("span",{children:h(n.created_at)})]}),"approved"===n.status&&n.approved_at&&(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"承認日時:"}),(0,t.jsx)("span",{children:h(n.approved_at)})]}),"rejected"===n.status&&n.rejection_reason&&(0,t.jsxs)(g.Zb,{className:"mt-4 border-red-200 bg-red-50",children:[(0,t.jsx)(g.Ol,{className:"pb-2",children:(0,t.jsx)(g.ll,{className:"text-sm text-red-800",children:"却下理由"})}),(0,t.jsx)(g.aY,{children:(0,t.jsx)("p",{className:"text-sm text-red-700",children:n.rejection_reason})})]})]}),(0,t.jsxs)("div",{className:"flex justify-end space-x-2",children:["approved"===n.status&&(0,t.jsx)(m.z,{variant:"default",onClick:()=>{a()},children:"ログインする"}),"rejected"===n.status&&(0,t.jsx)(m.z,{variant:"outline",onClick:()=>{a()},children:"再申請する"}),(0,t.jsx)(m.z,{variant:"outline",onClick:a,children:"閉じる"})]})]}):(0,t.jsx)("div",{className:"text-center py-8",children:(0,t.jsx)("p",{className:"text-gray-500",children:"申請情報が見つかりません"})})]})})}let ek={fullName:"田中 太郎",address:"東京都渋谷区...",email:"test@example.com",phoneNumber:"090-1234-5678",imabariResidency:"more_than_5_years",memberSince:"2年3ヶ月"};function eS(){let[e,s]=(0,l.useState)(y.wo.Home),[a,h]=(0,l.useState)(y.J0.Initial),[u,g]=(0,l.useState)(""),[p,f]=(0,l.useState)(!1),[j,b]=(0,l.useState)(null),[N,v]=(0,l.useState)(null),[w,k]=(0,l.useState)(""),[S,D]=(0,l.useState)(""),[_,I]=(0,l.useState)(""),[z,F]=(0,l.useState)(""),[L,P]=(0,l.useState)(""),[E,R]=(0,l.useState)(""),[J,A]=(0,l.useState)(""),[O,q]=(0,l.useState)(y.kK.Dogrun),[V,M]=(0,l.useState)(new Date),[B,T]=(0,l.useState)(ex),[Q,K]=(0,l.useState)(""),[$,H]=(0,l.useState)("all"),[U,W]=(0,l.useState)(!1),[G,ee]=(0,l.useState)(""),[es,ea]=(0,l.useState)(""),[et,el]=(0,l.useState)(""),[er,ei]=(0,l.useState)(null),[eo,eu]=(0,l.useState)(!1),[ef,ey]=(0,l.useState)(null),[ev,ew]=(0,l.useState)(""),[eS,eD]=(0,l.useState)("initial"),[e_,eI]=(0,l.useState)([]),[eZ,ez]=(0,l.useState)(!1),[eF,eL]=(0,l.useState)(em.filter(e=>"田中さん"===e.owner)),[eP,eE]=(0,l.useState)(ek),[eR,eJ]=(0,l.useState)(!1),[eA,eO]=(0,l.useState)(eh),[eY,eq]=(0,l.useState)(!1),[eV,eM]=(0,l.useState)(y.YN.Initial),[eB,eT]=(0,l.useState)(""),[eQ,eK]=(0,l.useState)(""),[e$,eH]=(0,l.useState)(""),[eU,eW]=(0,l.useState)([]),[eG,eX]=(0,l.useState)(""),[e0,e1]=(0,l.useState)(null),[e4,e5]=(0,l.useState)(null),[e2,e8]=(0,l.useState)(""),[e3,e6]=(0,l.useState)(""),[e7,e9]=(0,l.useState)(""),[se,ss]=(0,l.useState)([]),[sa,st]=(0,l.useState)(!1),[sl,sr]=(0,l.useState)(!1),[sn,si]=(0,l.useState)(null),[sc,so]=(0,l.useState)(eP.fullName),[sd,sm]=(0,l.useState)(eP.address),[sx,sh]=(0,l.useState)(eP.email),[su,sg]=(0,l.useState)(eP.phoneNumber),[sp,sf]=(0,l.useState)(eP.imabariResidency),sj=(0,l.useMemo)(()=>eA.filter(e=>!e.read).length,[eA]),sb=(0,l.useCallback)(async(e,s,a,t,l,r,n)=>{console.log("handleRegistrationSubmit called!"),e.preventDefault();let i=e.currentTarget;console.log("Form elements:",i.elements);let c=i.elements.namedItem("password").value,o=i.elements.namedItem("confirmPassword").value,d=i.elements.namedItem("fullName").value,m=i.elements.namedItem("email").value,u=i.elements.namedItem("phoneNumber").value,g=i.elements.namedItem("dogName").value,p=i.elements.namedItem("dogBreed").value,f=i.elements.namedItem("dogWeight").value;if(c!==o){alert("パスワードと確認用パスワードが一致しません。");return}if(!N){alert("ワクチンの接種証明書を添付してください。");return}let j=d.split(" "),v={email:m,password:c,last_name:j[0]||"",first_name:j.slice(1).join(" ")||"",phone_number:u,address:"".concat(s," ").concat(a).concat(t).concat(l).concat(r?" ".concat(r):"").trim(),prefecture:a,city:t,postal_code:s,dog_name:g,dog_breed:p||void 0,dog_weight:f||void 0};try{console.log("申請データ送信中:",v),console.log("API呼び出し開始");let e=await Z.x1.applyRegistration(v);console.log("API呼び出し成功:",e),localStorage.setItem("application_id",e.application_id),b(m),h(y.J0.RegistrationPending),x.Am.success("利用申請が送信されました",{description:"申請ID: ".concat(e.application_id,"\n管理者の承認をお待ちください。")})}catch(e){var w,C;console.error("申請エラー:",e),x.Am.error("申請の送信に失敗しました",{description:(null===(C=e.response)||void 0===C?void 0:null===(w=C.data)||void 0===w?void 0:w.detail)||"エラーが発生しました。もう一度お試しください。"})}},[N,w,h,b]),sN=(0,l.useCallback)(async e=>{var s,a;e.preventDefault();let t=e.currentTarget,l=t.elements.namedItem("loginEmail").value,r=null===(s=t.elements.namedItem("loginPassword"))||void 0===s?void 0:s.value;if(!r){g("パスワードを入力してください。");return}try{await Z.x1.login({email:l,password:r}),h(y.J0.LoggedIn),g(""),x.Am.success("ログインしました");try{let e=await Z.x1.getCurrentUser();console.log("ログインユーザー情報:",e)}catch(e){console.error("ユーザー情報取得エラー:",e)}}catch(e){console.error("ログインエラー:",e),(null===(a=e.response)||void 0===a?void 0:a.status)===401?g("メールアドレスまたはパスワードが正しくありません。"):g("ログインに失敗しました。もう一度お試しください。")}},[h,g]),sy=(0,l.useCallback)(e=>{e.preventDefault(),h(y.J0.ForgotPasswordSent)},[h]),sv=(0,l.useCallback)(()=>{Z.x1.logout(),h(y.J0.Initial),s(y.wo.Home),x.Am.success("ログアウトしました")},[h,s]),sw=(0,l.useCallback)(()=>{h(y.J0.LoggedIn),g("")},[h,g]),sC=(0,l.useCallback)(()=>{let e=localStorage.getItem("application_id");e?(si(e),sr(!0)):x.Am.error("申請IDが見つかりません")},[]),sk=(0,l.useCallback)(()=>{M(e=>{let s=new Date(e);return s.setMonth(s.getMonth()-1),s})},[]),sS=(0,l.useCallback)(()=>{M(e=>{let s=new Date(e);return s.setMonth(s.getMonth()+1),s})},[]),sD=(0,l.useCallback)(e=>{if(e.preventDefault(),!G||!es){alert("カテゴリーと投稿内容は必須です。");return}let s={id:Date.now(),user:"あなた",dog:"あなたの愛犬",content:es+(et?" "+et:""),image:!!er,likes:0,comments:0,time:"たった今",tag:G,isLiked:!1,commentsList:[]};T(e=>[s,...e]),ee(""),ea(""),el(""),ei(null),W(!1)},[G,es,et,er,T]),s_=(0,l.useCallback)(e=>{e.preventDefault(),ev.trim()&&null!==ef&&(T(e=>e.map(e=>e.id===ef?{...e,comments:e.comments+1,commentsList:[...e.commentsList,{id:Date.now(),user:"あなた",text:ev.trim()}]}:e)),ew(""),eu(!1),ey(null))},[ev,ef,T]),sI=(0,l.useCallback)(e=>{if(e.preventDefault(),!e0){alert("ワクチンの接種証明書を添付してください。");return}let s={id:Date.now(),name:eB,breed:eQ,weight:"".concat(parseFloat(e$),"kg"),owner:eP.fullName,time:"たった今",personality:eU,lastVaccinationDate:eG};eL(e=>[...e,s]),eM(y.YN.Pending),x.Am.success("愛犬の登録申請が送信されました",{description:"管理者の承認をお待ちください。"})},[eB,eQ,e$,eU,eG,e0,eP.fullName]),sZ=(0,l.useCallback)(e=>{eL(s=>s.map(s=>s.id===e?{...s,approved:!0}:s)),x.Am.success("愛犬の登録が承認されました",{description:"愛犬の情報がプロフィールに追加されました。"})},[]),sz=(0,l.useCallback)(e=>{let s=eF.find(s=>s.id===e);s&&(e5(e),e8(s.name),e6(s.breed),e9(s.weight.replace("kg","")),ss(s.personality||[]))},[eF]),sF=(0,l.useCallback)(e=>{e.preventDefault(),null!==e4&&(eL(e=>e.map(e=>e.id===e4?{...e,name:e2,breed:e3,weight:"".concat(e7,"kg"),personality:se}:e)),e5(null),e8(""),e6(""),e9(""),ss([]))},[e4,e2,e3,e7,se,eL]),sL=(0,l.useCallback)(()=>{e5(null),e8(""),e6(""),e9(""),ss([])},[]),sP=(0,l.useCallback)(e=>{e.preventDefault(),eE({...eP,fullName:sc,address:sd,email:sx,phoneNumber:su,imabariResidency:sp}),st(!1)},[eP,sc,sd,sx,su,sp,eE,st]),sE=(0,l.useCallback)(()=>{st(!1),so(eP.fullName),sm(eP.address),sh(eP.email),sg(eP.phoneNumber),sf(eP.imabariResidency)},[eP,st]);return(0,t.jsxs)("div",{className:"max-w-md mx-auto bg-white min-h-screen shadow-2xl",children:[(0,t.jsxs)("div",{className:"relative bg-gradient-to-r from-asics-satoyama-blue to-asics-satoyama-blue-700 text-white px-4 py-5 sticky top-0 z-10 shadow-xl overflow-hidden",children:[(0,t.jsx)("div",{className:"absolute inset-0 opacity-10",children:(0,t.jsx)("svg",{className:"w-full h-full",viewBox:"0 0 400 80",preserveAspectRatio:"none",children:(0,t.jsx)("path",{d:"M0,40 Q100,20 200,40 T400,40 L400,80 L0,80 Z",fill:"currentColor",className:"text-fc-imabari-yellow"})})}),(0,t.jsxs)("div",{className:"relative z-10 flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"bg-asics-satoyama-green/30 p-2.5 rounded-full",children:(0,t.jsx)(r.Z,{className:"h-6 w-6 text-asics-satoyama-green"})}),(0,t.jsx)("h1",{className:"text-2xl font-heading font-bold",children:"里山ドッグラン"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("span",{className:"text-xs font-medium px-3 py-1.5 rounded-full transition-all ".concat(a===y.J0.LoggedIn?"bg-asics-satoyama-gold text-white font-bold":"bg-white/20 text-white border border-white/30"),children:a===y.J0.LoggedIn?"ログイン中":"ログアウト中"}),a===y.J0.LoggedIn&&(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)(m.z,{variant:"ghost",size:"icon",onClick:()=>eJ(!0),className:"text-white hover:text-asics-satoyama-green hover:bg-white/10 rounded-full transition-all",children:[(0,t.jsx)(n.Z,{className:"h-5 w-5"}),(0,t.jsx)("span",{className:"sr-only",children:"お知らせ"})]}),sj>0&&(0,t.jsx)("span",{className:"absolute -top-1 -right-1 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white bg-asics-satoyama-gold rounded-full animate-pulse",children:sj})]})})]})]})]}),(0,t.jsxs)("div",{className:"px-4 py-6 pb-20",children:[e===y.wo.Home&&(0,t.jsx)(C,{userStatus:a,setUserStatus:h,showTerms:p,setShowTerms:f,loginError:u,setLoginError:g,vaccinationCertificateFile:N,setVaccinationCertificateFile:v,selectedImabariResidency:w,setSelectedImabariResidency:k,handleRegistrationSubmit:sb,handleLoginSubmit:sN,handleForgotPasswordSubmit:sy,handleDemoLogin:sw,handleLogout:sv,onCheckApplicationStatus:sC,postalCode:S,setPostalCode:D,prefecture:_,setPrefecture:I,city:z,setCity:F,street:L,setStreet:P,building:E,setBuilding:R,applicationDate:J,setApplicationDate:A}),e===y.wo.Events&&(0,t.jsx)(Y,{userStatus:a,activeCalendar:O,setActiveCalendar:q,displayDate:V,handlePreviousMonth:sk,handleNextMonth:sS}),e===y.wo.Feed&&a===y.J0.LoggedIn&&(0,t.jsx)(X,{userStatus:a,searchQuery:Q,setSearchQuery:K,activeTag:$,setActiveTag:H,recentPosts:B,setRecentPosts:T,setShowCreatePostModal:W,setSelectedPostIdForComment:ey,setShowCommentModal:eu}),e===y.wo.Entry&&a===y.J0.LoggedIn&&(0,t.jsx)(en,{userStatus:a,entryStep:eS,setEntryStep:eD,loggedInUserDogs:eF,selectedDogsForEntry:e_,setSelectedDogsForEntry:eI,isInDogRun:eZ,setIsInDogRun:ez}),e===y.wo.Profile&&a===y.J0.LoggedIn&&(0,t.jsx)(ec,{userStatus:a,loggedInUserDogs:eF,setLoggedInUserDogs:eL,setShowAddDogModal:eq,handleEditDog:sz,handleLogout:sv,ownerProfile:eP,setOwnerProfile:eE,setShowEditOwnerModal:st}),e!==y.wo.Home&&e!==y.wo.Events&&a!==y.J0.LoggedIn&&a!==y.J0.Initial&&a!==y.J0.RegistrationForm&&a!==y.J0.RegistrationPending&&a!==y.J0.ApprovedNeedsLogin&&a!==y.J0.ForgotPasswordForm&&a!==y.J0.ForgotPasswordSent&&(0,t.jsx)("div",{className:"space-y-6 text-center",children:(0,t.jsx)("div",{className:"border-asics-blue-200",style:{backgroundColor:"rgba(0, 8, 148, 0.05)",borderColor:"rgba(0, 8, 148, 0.2)"},children:(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsx)("h2",{className:"text-xl font-heading mb-4",style:{color:"rgb(0, 8, 148)"},children:"この機能はログイン後に利用可能です"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 font-caption",children:"すべての機能をご利用いただくには、ログインが必要です。"}),(0,t.jsx)(m.z,{onClick:()=>s(y.wo.Home),className:"mt-6 text-white",style:{backgroundColor:"rgb(0, 8, 148)"},children:"ホームに戻る"})]})})})]}),(0,t.jsx)(ed,{showNoticesModal:eR,setShowNoticesModal:eJ,notices:eA,setNotices:eO}),(0,t.jsx)(eg,{showCreatePostModal:U,setShowCreatePostModal:W,newPostCategory:G,setNewPostCategory:ee,newPostContent:es,setNewPostContent:ea,newPostHashtags:et,setNewPostHashtags:el,newPostImageFile:er,setNewPostImageFile:ei,handleNewPostSubmit:sD}),(0,t.jsx)(ep,{showCommentModal:eo,setShowCommentModal:eu,selectedPostIdForComment:ef,setSelectedPostIdForComment:ey,newCommentText:ev,setNewCommentText:ew,recentPosts:B,setRecentPosts:T,handleAddComment:s_}),(0,t.jsx)(ej,{showAddDogModal:eY,setShowAddDogModal:eq,newDogRegistrationStatus:eV,setNewDogRegistrationStatus:eM,newDogName:eB,setNewDogName:eT,newDogBreed:eQ,setNewDogBreed:eK,newDogWeight:e$,setNewDogWeight:eH,newDogPersonality:eU,setNewDogPersonality:eW,newDogLastVaccinationDate:eG,setNewDogLastVaccinationDate:eX,newDogVaccinationCertificateFile:e0,setNewDogVaccinationCertificateFile:e1,setLoggedInUserDogs:eL,handleAddDogRegistrationSubmit:sI,handleApproveNewDog:sZ}),(0,t.jsx)(eb,{editingDogId:e4,setEditingDogId:e5,editedDogName:e2,setEditedDogName:e8,editedDogBreed:e3,setEditedDogBreed:e6,editedDogWeight:e7,setEditedDogWeight:e9,editedDogPersonality:se,setEditedDogPersonality:ss,loggedInUserDogs:eF,setLoggedInUserDogs:eL,handleSaveDogEdit:sF,handleCancelDogEdit:sL}),(0,t.jsx)(eN,{showEditOwnerModal:sa,setShowEditOwnerModal:st,ownerProfile:eP,setOwnerProfile:eE,editedOwnerFullName:sc,setEditedOwnerFullName:so,editedOwnerAddress:sd,setEditedOwnerAddress:sm,editedOwnerEmail:sx,setEditedOwnerEmail:sh,editedOwnerPhoneNumber:su,setEditedOwnerPhoneNumber:sg,editedOwnerImabariResidency:sp,setEditedOwnerImabariResidency:sf,handleSaveOwnerEdit:sP,handleCancelOwnerEdit:sE}),(0,t.jsx)("div",{className:"fixed bottom-0 left-1/2 transform -translate-x-1/2 w-full max-w-md bg-white border-t-2 border-asics-satoyama-blue/20 shadow-2xl",children:(0,t.jsxs)("div",{className:"flex justify-around py-3",children:[(0,t.jsxs)(m.z,{variant:e===y.wo.Home?"default":"ghost",size:"sm",onClick:()=>s(y.wo.Home),className:"flex-col h-auto py-2 px-4 rounded-xl transition-all transform ".concat(e===y.wo.Home?"bg-asics-satoyama-blue text-white shadow-lg scale-105":"text-asics-satoyama-blue hover:bg-asics-satoyama-blue/10"),children:[(0,t.jsx)(i.Z,{className:"h-5 w-5 mb-1 ".concat(e===y.wo.Home?"animate-pulse":"")}),(0,t.jsx)("span",{className:"text-xs font-bold",children:"ホーム"})]}),(0,t.jsxs)(m.z,{variant:e===y.wo.Events?"default":"ghost",size:"sm",onClick:()=>s(y.wo.Events),className:"flex-col h-auto py-2 px-4 rounded-xl transition-all transform ".concat(e===y.wo.Events?"bg-asics-satoyama-blue text-white shadow-lg scale-105":"text-asics-satoyama-blue hover:bg-asics-satoyama-blue/10"),children:[(0,t.jsx)(r.Z,{className:"h-5 w-5 mb-1 ".concat(e===y.wo.Events?"animate-pulse":"")}),(0,t.jsx)("span",{className:"text-xs font-bold",children:"イベント"})]}),(0,t.jsxs)(m.z,{variant:e===y.wo.Feed&&a===y.J0.LoggedIn?"default":"ghost",size:"sm",onClick:()=>a===y.J0.LoggedIn&&s(y.wo.Feed),className:"flex-col h-auto py-2 px-4 rounded-xl transition-all transform ".concat(e===y.wo.Feed&&a===y.J0.LoggedIn?"bg-asics-satoyama-blue text-white shadow-lg scale-105":a!==y.J0.LoggedIn?"text-gray-400 opacity-50 cursor-not-allowed":"text-asics-satoyama-blue hover:bg-asics-satoyama-blue/10"),disabled:a!==y.J0.LoggedIn,children:[(0,t.jsx)(c.Z,{className:"h-5 w-5 mb-1 ".concat(e===y.wo.Feed&&a===y.J0.LoggedIn?"animate-pulse":"")}),(0,t.jsx)("span",{className:"text-xs font-bold",children:"投稿"})]}),(0,t.jsxs)(m.z,{variant:e===y.wo.Entry&&a===y.J0.LoggedIn?"default":"ghost",size:"sm",onClick:()=>a===y.J0.LoggedIn&&s(y.wo.Entry),className:"flex-col h-auto py-2 px-4 rounded-xl transition-all transform ".concat(e===y.wo.Entry&&a===y.J0.LoggedIn?"bg-asics-satoyama-blue text-white shadow-lg scale-105":a!==y.J0.LoggedIn?"text-gray-400 opacity-50 cursor-not-allowed":"text-asics-satoyama-blue hover:bg-asics-satoyama-blue/10"),disabled:a!==y.J0.LoggedIn,children:[(0,t.jsx)(o.Z,{className:"h-5 w-5 mb-1 ".concat(e===y.wo.Entry&&a===y.J0.LoggedIn?"animate-pulse":"")}),(0,t.jsx)("span",{className:"text-xs font-bold",children:"入場"})]}),(0,t.jsxs)(m.z,{variant:e===y.wo.Profile&&a===y.J0.LoggedIn?"default":"ghost",size:"sm",onClick:()=>a===y.J0.LoggedIn&&s(y.wo.Profile),className:"flex-col h-auto py-2 px-4 rounded-xl transition-all transform ".concat(e===y.wo.Profile&&a===y.J0.LoggedIn?"bg-asics-satoyama-blue text-white shadow-lg scale-105":a!==y.J0.LoggedIn?"text-gray-400 opacity-50 cursor-not-allowed":"text-asics-satoyama-blue hover:bg-asics-satoyama-blue/10"),disabled:a!==y.J0.LoggedIn,children:[(0,t.jsx)(d.Z,{className:"h-5 w-5 mb-1 ".concat(e===y.wo.Profile&&a===y.J0.LoggedIn?"animate-pulse":"")}),(0,t.jsx)("span",{className:"text-xs font-bold",children:"マイページ"})]})]})}),(0,t.jsx)(eC,{isOpen:sl,onClose:()=>sr(!1),applicationId:sn})]})}},837:function(e,s,a){"use strict";a.d(s,{$N:function(){return g},Be:function(){return p},Vq:function(){return c},cN:function(){return u},cZ:function(){return x},fK:function(){return h},hg:function(){return o}});var t=a(7437),l=a(2265),r=a(3304),n=a(4697),i=a(7440);let c=r.fC,o=r.xz,d=r.h_;r.x8;let m=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(r.aV,{ref:s,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...l})});m.displayName=r.aV.displayName;let x=l.forwardRef((e,s)=>{let{className:a,children:l,...c}=e;return(0,t.jsxs)(d,{children:[(0,t.jsx)(m,{}),(0,t.jsxs)(r.VY,{ref:s,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...c,children:[l,(0,t.jsxs)(r.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,t.jsx)(n.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});x.displayName=r.VY.displayName;let h=e=>{let{className:s,...a}=e;return(0,t.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",s),...a})};h.displayName="DialogHeader";let u=e=>{let{className:s,...a}=e;return(0,t.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...a})};u.displayName="DialogFooter";let g=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(r.Dx,{ref:s,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",a),...l})});g.displayName=r.Dx.displayName;let p=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(r.dk,{ref:s,className:(0,i.cn)("text-sm text-muted-foreground",a),...l})});p.displayName=r.dk.displayName},3102:function(e,s,a){"use strict";a.d(s,{I:function(){return n}});var t=a(7437),l=a(2265),r=a(7440);let n=l.forwardRef((e,s)=>{let{className:a,type:l,variant:n="default",...i}=e;return(0,t.jsx)("input",{type:l,className:(0,r.cn)("flex h-10 w-full rounded-md border bg-background px-3 py-2 text-base ring-offset-background transition-all duration-300","file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground","placeholder:text-muted-foreground","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2","disabled:cursor-not-allowed disabled:opacity-50","hover:border-fc-imabari-navy/40","md:text-sm",{default:"border-input focus-visible:ring-ring","fc-primary":"border-fc-imabari-navy/20 focus-visible:ring-fc-imabari-yellow focus-visible:border-fc-imabari-navy",satoyama:"border-satoyama-green/30 focus-visible:ring-satoyama-green focus-visible:border-satoyama-green"}[n],a),ref:s,...i})});n.displayName="Input"},7135:function(e,s,a){"use strict";a.d(s,{_:function(){return o}});var t=a(7437),l=a(2265),r=a(8364),n=a(3027),i=a(7440);let c=(0,n.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(r.f,{ref:s,className:(0,i.cn)(c(),a),...l})});o.displayName=r.f.displayName},6294:function(e,s,a){"use strict";a.d(s,{Bw:function(){return g},Ph:function(){return d},Ql:function(){return p},i4:function(){return x},ki:function(){return m}});var t=a(7437),l=a(2265),r=a(1543),n=a(2421),i=a(4392),c=a(2468),o=a(7440);let d=r.fC;r.ZA;let m=r.B4,x=l.forwardRef((e,s)=>{let{className:a,children:l,...i}=e;return(0,t.jsxs)(r.xz,{ref:s,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...i,children:[l,(0,t.jsx)(r.JO,{asChild:!0,children:(0,t.jsx)(n.Z,{className:"h-4 w-4 opacity-50"})})]})});x.displayName=r.xz.displayName;let h=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(r.u_,{ref:s,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",a),...l,children:(0,t.jsx)(i.Z,{className:"h-4 w-4"})})});h.displayName=r.u_.displayName;let u=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(r.$G,{ref:s,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",a),...l,children:(0,t.jsx)(n.Z,{className:"h-4 w-4"})})});u.displayName=r.$G.displayName;let g=l.forwardRef((e,s)=>{let{className:a,children:l,position:n="popper",...i}=e;return(0,t.jsx)(r.h_,{children:(0,t.jsxs)(r.VY,{ref:s,className:(0,o.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:n,...i,children:[(0,t.jsx)(h,{}),(0,t.jsx)(r.l_,{className:(0,o.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:l}),(0,t.jsx)(u,{})]})})});g.displayName=r.VY.displayName,l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(r.__,{ref:s,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...l})}).displayName=r.__.displayName;let p=l.forwardRef((e,s)=>{let{className:a,children:l,...n}=e;return(0,t.jsxs)(r.ck,{ref:s,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...n,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(r.wU,{children:(0,t.jsx)(c.Z,{className:"h-4 w-4"})})}),(0,t.jsx)(r.eT,{children:l})]})});p.displayName=r.ck.displayName,l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(r.Z0,{ref:s,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",a),...l})}).displayName=r.Z0.displayName},4344:function(e,s,a){"use strict";a.d(s,{Z:function(){return i}});var t=a(7437),l=a(2265),r=a(8484),n=a(7440);let i=l.forwardRef((e,s)=>{let{className:a,orientation:l="horizontal",decorative:i=!0,...c}=e;return(0,t.jsx)(r.f,{ref:s,decorative:i,orientation:l,className:(0,n.cn)("shrink-0 bg-border","horizontal"===l?"h-[1px] w-full":"h-full w-[1px]",a),...c})});i.displayName=r.f.displayName},3146:function(e,s,a){"use strict";a.d(s,{g:function(){return n}});var t=a(7437),l=a(2265),r=a(7440);let n=l.forwardRef((e,s)=>{let{className:a,variant:l="default",...n}=e;return(0,t.jsx)("textarea",{className:(0,r.cn)("flex min-h-[80px] w-full rounded-md border bg-background px-3 py-2 text-base ring-offset-background transition-all duration-300","placeholder:text-muted-foreground","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2","disabled:cursor-not-allowed disabled:opacity-50","hover:border-fc-imabari-navy/40","resize-y","md:text-sm",{default:"border-input focus-visible:ring-ring","fc-primary":"border-fc-imabari-navy/20 focus-visible:ring-fc-imabari-yellow focus-visible:border-fc-imabari-navy",satoyama:"border-satoyama-green/30 focus-visible:ring-satoyama-green focus-visible:border-satoyama-green"}[l],a),ref:s,...n})});n.displayName="Textarea"}},function(e){e.O(0,[485,125,776,635,137,449,952,971,23,744],function(){return e(e.s=5531)}),_N_E=e.O()}]);